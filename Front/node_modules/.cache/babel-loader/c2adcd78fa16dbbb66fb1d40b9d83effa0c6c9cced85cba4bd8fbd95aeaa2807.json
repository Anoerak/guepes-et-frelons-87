{"ast":null,"code":"var _s = $RefreshSig$();\n/* eslint-disable no-undef */\n// We want to generate a Facebook access token that will be used to fetch the posts from the Facebook page.\n// We gonna fetch it using a hook that we will create in the next step.\n\nimport { useState, useEffect } from 'react';\nconst generateFbToken = () => {\n  _s();\n  const [token, setToken] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  // const [longLiveToken, setLongLiveToken] = useState('');\n  // const [longLiveTokenLoading, setLongLiveTokenLoading] = useState(true);\n  // const [longLiveTokenError, setLongLiveTokenError] = useState(false);\n  // const [longLiveTokenErrorMessage, setLongLiveTokenErrorMessage] = useState('');\n\n  useEffect(() => {\n    setLoading(true);\n    const fetchToken = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/oauth/access_token?client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&client_secret=${process.env.REACT_APP_FACEBOOK_APP_SECRET}&grant_type=client_credentials`);\n        const data = await response.json();\n        setToken(data.access_token);\n        console.log(token);\n        // fetchLongLiveToken(data.access_token);\n        setLoading(false);\n      } catch (error) {\n        setError(true);\n        setErrorMessage(error.message);\n        setLoading(false);\n      }\n    };\n    fetchToken();\n\n    // const fetchLongLiveToken = async (shortToken) => {\n    // \ttry {\n    // \t\tconst response = await fetch(\n    // \t\t\t`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&client_secret=${process.env.REACT_APP_FACEBOOK_APP_SECRET}&fb_exchange_token=${shortToken}`\n    // \t\t);\n    // \t\tconst data = await response.json();\n    // \t\tconsole.log(data);\n    // \t\tsetLongLiveToken(data.access_token);\n    // \t\tsetLongLiveTokenLoading(false);\n    // \t} catch (error) {\n    // \t\tsetLongLiveTokenError(true);\n    // \t\tsetLongLiveTokenErrorMessage(error.message);\n    // \t\tsetLongLiveTokenLoading(false);\n    // \t}\n    // };\n  }, []);\n\n  // if (longLiveToken) {\n  // \treturn {\n  // \t\ttoken: longLiveToken,\n  // \t\tloading: longLiveTokenLoading,\n  // \t\terror: longLiveTokenError,\n  // \t\terrorMessage: longLiveTokenErrorMessage,\n  // \t};\n  // } else {\n  return {\n    token,\n    loading,\n    error,\n    errorMessage\n  };\n  // }\n};\n_s(generateFbToken, \"NpngB6vQRrbE4BeaCdoL+vD3rkY=\");\nexport default generateFbToken;","map":{"version":3,"names":["useState","useEffect","generateFbToken","_s","token","setToken","loading","setLoading","error","setError","errorMessage","setErrorMessage","fetchToken","response","fetch","process","env","REACT_APP_CORS_ANYWHERE_PROXY","REACT_APP_FACEBOOK_APP_ID","REACT_APP_FACEBOOK_APP_SECRET","data","json","access_token","console","log","message"],"sources":["/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/src/utils/hooks/facebook/generateFbToken.jsx"],"sourcesContent":["/* eslint-disable no-undef */\n// We want to generate a Facebook access token that will be used to fetch the posts from the Facebook page.\n// We gonna fetch it using a hook that we will create in the next step.\n\nimport { useState, useEffect } from 'react';\n\nconst generateFbToken = () => {\n\tconst [token, setToken] = useState('');\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState(false);\n\tconst [errorMessage, setErrorMessage] = useState('');\n\n\t// const [longLiveToken, setLongLiveToken] = useState('');\n\t// const [longLiveTokenLoading, setLongLiveTokenLoading] = useState(true);\n\t// const [longLiveTokenError, setLongLiveTokenError] = useState(false);\n\t// const [longLiveTokenErrorMessage, setLongLiveTokenErrorMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\n\t\tconst fetchToken = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/oauth/access_token?client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&client_secret=${process.env.REACT_APP_FACEBOOK_APP_SECRET}&grant_type=client_credentials`\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\t\t\t\tsetToken(data.access_token);\n\t\t\t\tconsole.log(token);\n\t\t\t\t// fetchLongLiveToken(data.access_token);\n\t\t\t\tsetLoading(false);\n\t\t\t} catch (error) {\n\t\t\t\tsetError(true);\n\t\t\t\tsetErrorMessage(error.message);\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t};\n\t\tfetchToken();\n\n\t\t// const fetchLongLiveToken = async (shortToken) => {\n\t\t// \ttry {\n\t\t// \t\tconst response = await fetch(\n\t\t// \t\t\t`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&client_secret=${process.env.REACT_APP_FACEBOOK_APP_SECRET}&fb_exchange_token=${shortToken}`\n\t\t// \t\t);\n\t\t// \t\tconst data = await response.json();\n\t\t// \t\tconsole.log(data);\n\t\t// \t\tsetLongLiveToken(data.access_token);\n\t\t// \t\tsetLongLiveTokenLoading(false);\n\t\t// \t} catch (error) {\n\t\t// \t\tsetLongLiveTokenError(true);\n\t\t// \t\tsetLongLiveTokenErrorMessage(error.message);\n\t\t// \t\tsetLongLiveTokenLoading(false);\n\t\t// \t}\n\t\t// };\n\t}, []);\n\n\t// if (longLiveToken) {\n\t// \treturn {\n\t// \t\ttoken: longLiveToken,\n\t// \t\tloading: longLiveTokenLoading,\n\t// \t\terror: longLiveTokenError,\n\t// \t\terrorMessage: longLiveTokenErrorMessage,\n\t// \t};\n\t// } else {\n\treturn { token, loading, error, errorMessage };\n\t// }\n};\n\nexport default generateFbToken;\n"],"mappings":";AAAA;AACA;AACA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA;EACA;EACA;;EAEAC,SAAS,CAAC,MAAM;IACfM,UAAU,CAAC,IAAI,CAAC;IAEhB,MAAMK,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,GAAEC,OAAO,CAACC,GAAG,CAACC,6BAA8B,2DAA0DF,OAAO,CAACC,GAAG,CAACE,yBAA0B,kBAAiBH,OAAO,CAACC,GAAG,CAACG,6BAA8B,gCACzM,CAAC;QACD,MAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;QAClChB,QAAQ,CAACe,IAAI,CAACE,YAAY,CAAC;QAC3BC,OAAO,CAACC,GAAG,CAACpB,KAAK,CAAC;QAClB;QACAG,UAAU,CAAC,KAAK,CAAC;MAClB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACfC,QAAQ,CAAC,IAAI,CAAC;QACdE,eAAe,CAACH,KAAK,CAACiB,OAAO,CAAC;QAC9BlB,UAAU,CAAC,KAAK,CAAC;MAClB;IACD,CAAC;IACDK,UAAU,CAAC,CAAC;;IAEZ;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACD,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,OAAO;IAAER,KAAK;IAAEE,OAAO;IAAEE,KAAK;IAAEE;EAAa,CAAC;EAC9C;AACD,CAAC;AAACP,EAAA,CA3DID,eAAe;AA6DrB,eAAeA,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}