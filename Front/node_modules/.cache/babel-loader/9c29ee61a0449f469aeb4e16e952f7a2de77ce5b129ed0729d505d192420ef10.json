{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'axios';/**\n * Personalized hook to fetch data from the API\n *\n * @param {string} path specific path to fetch data {optional}\n * @param {string} option specific option to fetch data {optional}\n * @returns {Array} data, isError, loading, errorMessage\n */var useFetch=function useFetch(/** @type {string} */path,/** @type {string} */option){// Define the state\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),url=_useState2[0],setUrl=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState({isError:false,errorMessage:''}),_useState8=_slicedToArray(_useState7,2),_useState8$=_useState8[0],isError=_useState8$.isError,errorMessage=_useState8$.errorMessage,setError=_useState8[1];useEffect(function(){// If there no path provided, we use the JSON server url\nvar urlToFetch=path?path:'http://localhost:8080/';setUrl(urlToFetch);if(!url)return;if(option){setLoading(true);// Fetch the datas from the JSON-Server\nvar fetchDatas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(/** @type {string} */url,/** @type {string} */option){var response,datas;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(url+option);case 3:response=_context.sent;setData(response);datas=response.data;setData(datas);setLoading(false);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);setError({isError:true,errorMessage:_context.t0.message});setLoading(false);case 14:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchDatas(_x,_x2){return _ref.apply(this,arguments);};}();fetchDatas(url,option);}else{setLoading(true);// Fetch the datas from the JSON-Server\nvar _fetchDatas=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(/** @type {string} */url){var response,datas;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(url);case 3:response=_context2.sent;setData(response);datas=response.data;setData(datas);setLoading(false);_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);setError({isError:true,errorMessage:_context2.t0.message});setLoading(false);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function _fetchDatas(_x3){return _ref2.apply(this,arguments);};}();_fetchDatas(url);}},[url,option,path]);return[data,isError,loading,errorMessage];};export default useFetch;","map":{"version":3,"names":["useState","useEffect","axios","useFetch","path","option","_useState","_useState2","_slicedToArray","url","setUrl","_useState3","_useState4","data","setData","_useState5","_useState6","loading","setLoading","_useState7","isError","errorMessage","_useState8","_useState8$","setError","urlToFetch","fetchDatas","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","datas","wrap","_callee$","_context","prev","next","get","sent","t0","message","stop","_x","_x2","apply","arguments","_ref2","_callee2","_callee2$","_context2","_x3"],"sources":["/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/src/utils/hooks/useFetch.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n/**\n * Personalized hook to fetch data from the API\n *\n * @param {string} path specific path to fetch data {optional}\n * @param {string} option specific option to fetch data {optional}\n * @returns {Array} data, isError, loading, errorMessage\n */\nconst useFetch = (/** @type {string} */ path, /** @type {string} */ option) => {\n\t// Define the state\n\tconst [url, setUrl] = useState(null);\n\tconst [data, setData] = useState({});\n\tconst [loading, setLoading] = useState(true);\n\tconst [{ isError, errorMessage }, setError] = useState({ isError: false, errorMessage: '' });\n\n\tuseEffect(() => {\n\t\t// If there no path provided, we use the JSON server url\n\t\tconst urlToFetch = path ? path : 'http://localhost:8080/';\n\t\tsetUrl(urlToFetch);\n\t\tif (!url) return;\n\n\t\tif (option) {\n\t\t\tsetLoading(true);\n\n\t\t\t// Fetch the datas from the JSON-Server\n\t\t\tconst fetchDatas = async (/** @type {string} */ url, /** @type {string} */ option) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await axios.get(url + option);\n\t\t\t\t\tsetData(response);\n\t\t\t\t\tconst datas = response.data;\n\t\t\t\t\tsetData(datas);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tsetError({ isError: true, errorMessage: error.message });\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}\n\t\t\t};\n\t\t\tfetchDatas(url, option);\n\t\t} else {\n\t\t\tsetLoading(true);\n\n\t\t\t// Fetch the datas from the JSON-Server\n\t\t\tconst fetchDatas = async (/** @type {string} */ url) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst response = await axios.get(url);\n\t\t\t\t\tsetData(response);\n\t\t\t\t\tconst datas = response.data;\n\t\t\t\t\tsetData(datas);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tsetError({ isError: true, errorMessage: error.message });\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t}\n\t\t\t};\n\t\t\tfetchDatas(url);\n\t\t}\n\t}, [url, option, path]);\n\n\treturn [data, isError, loading, errorMessage];\n};\n\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}