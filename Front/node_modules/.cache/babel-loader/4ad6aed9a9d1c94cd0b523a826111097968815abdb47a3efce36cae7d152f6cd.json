{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nconst bugsOnTheLoose = () => {\n  _s();\n  useEffect(() => {\n    var BugDispatch = {\n      options: {\n        minDelay: 500,\n        maxDelay: 10000,\n        minBugs: 2,\n        maxBugs: 20,\n        minSpeed: 5,\n        maxSpeed: 10,\n        maxLargeTurnDeg: 150,\n        maxSmallTurnDeg: 10,\n        maxWiggleDeg: 5,\n        imageSprite: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/191814/fly-sprite.png',\n        bugWidth: 13,\n        bugHeight: 14,\n        num_frames: 5,\n        zoom: 10,\n        // random zoom variation from 1 to 10 - 10 being full size.\n        canFly: true,\n        canDie: true,\n        numDeathTypes: 3,\n        monitorMouseMovement: false,\n        eventDistanceToBug: 40,\n        minTimeBetweenMultipy: 1000,\n        mouseOver: 'random' // can be 'fly', 'flyoff' (if the bug can fly), die', 'multiply', 'nothing' or 'random'\n      },\n\n      initialize: function (options) {\n        this.options = mergeOptions(this.options, options);\n\n        // sanity check:\n        if (this.options.minBugs > this.options.maxBugs) {\n          this.options.minBugs = this.options.maxBugs;\n        }\n        this.modes = ['multiply', 'nothing'];\n        if (this.options.canFly) {\n          this.modes.push('fly', 'flyoff');\n        }\n        if (this.options.canDie) {\n          this.modes.push('die');\n        }\n        if (this.modes.indexOf(this.options.mouseOver) == -1) {\n          // invalid mode: use random:\n          this.options.mouseOver = 'random';\n        }\n\n        // can we transform?\n        this.transform = null;\n        this.transforms = {\n          Moz: function (s) {\n            this.bug.style.MozTransform = s;\n          },\n          webkit: function (s) {\n            this.bug.style.webkitTransform = s;\n          },\n          O: function (s) {\n            this.bug.style.OTransform = s;\n          },\n          ms: function (s) {\n            this.bug.style.msTransform = s;\n          },\n          Khtml: function (s) {\n            this.bug.style.KhtmlTransform = s;\n          },\n          w3c: function (s) {\n            this.bug.style.transform = s;\n          }\n        };\n\n        // check to see if it is a modern browser:\n\n        if ('transform' in document.documentElement.style) {\n          this.transform = this.transforms.w3c;\n        } else {\n          // feature detection for the other transforms:\n          var vendors = ['Moz', 'webkit', 'O', 'ms', 'Khtml'],\n            i = 0;\n          for (i = 0; i < vendors.length; i++) {\n            if (vendors[i] + 'Transform' in document.documentElement.style) {\n              this.transform = this.transforms[vendors[i]];\n              break;\n            }\n          }\n        }\n\n        // dont support transforms... quit\n        if (!this.transform) return;\n\n        // make bugs:\n        this.bugs = [];\n        var numBugs = this.options.mouseOver === 'multiply' ? this.options.minBugs : this.random(this.options.minBugs, this.options.maxBugs, true),\n          i = 0,\n          that = this;\n        for (i = 0; i < numBugs; i++) {\n          var options = JSON.parse(JSON.stringify(this.options)),\n            b = SpawnBug();\n          options.wingsOpen = this.options.canFly ? Math.random() > 0.5 ? true : false : true, options.walkSpeed = this.random(this.options.minSpeed, this.options.maxSpeed), b.initialize(this.transform, options);\n          this.bugs.push(b);\n        }\n\n        // fly them in staggered:\n        this.spawnDelay = [];\n        for (i = 0; i < numBugs; i++) {\n          var delay = this.random(this.options.minDelay, this.options.maxDelay, true),\n            thebug = this.bugs[i];\n          // fly the bug onto the page:\n          this.spawnDelay[i] = setTimeout(function (thebug) {\n            return function () {\n              if (that.options.canFly) {\n                thebug.flyIn();\n              } else {\n                thebug.walkIn();\n              }\n            };\n          }(thebug), delay);\n\n          // add mouse over events:\n          that.add_events_to_bug(thebug);\n        }\n\n        // add window event if required:\n        if (this.options.monitorMouseMovement) {\n          window.onmousemove = function () {\n            that.check_if_mouse_close_to_bug();\n          };\n        }\n      },\n      stop: function () {\n        for (var i = 0; i < this.bugs.length; i++) {\n          if (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n          this.bugs[i].stop();\n        }\n      },\n      end: function () {\n        for (var i = 0; i < this.bugs.length; i++) {\n          if (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n          this.bugs[i].stop();\n          this.bugs[i].remove();\n        }\n      },\n      reset: function () {\n        this.stop();\n        for (var i = 0; i < this.bugs.length; i++) {\n          this.bugs[i].reset();\n          this.bugs[i].walkIn();\n        }\n      },\n      killAll: function () {\n        for (var i = 0; i < this.bugs.length; i++) {\n          if (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n          this.bugs[i].die();\n        }\n      },\n      add_events_to_bug: function (thebug) {\n        var that = this;\n        if (thebug.bug) {\n          if (thebug.bug.addEventListener) {\n            thebug.bug.addEventListener('mouseover', function (e) {\n              that.on_bug(thebug);\n            });\n          } else if (thebug.bug.attachEvent) {\n            thebug.bug.attachEvent('onmouseover', function (e) {\n              that.on_bug(thebug);\n            });\n          }\n        }\n      },\n      check_if_mouse_close_to_bug: function (e) {\n        e = e || window.event;\n        if (!e) {\n          return;\n        }\n        var posx = 0,\n          posy = 0;\n        if (e.client && e.client.x) {\n          posx = e.client.x;\n          posy = e.client.y;\n        } else if (e.clientX) {\n          posx = e.clientX;\n          posy = e.clientY;\n        } else if (e.page && e.page.x) {\n          posx = e.page.x - (document.body.scrollLeft + document.documentElement.scrollLeft);\n          posy = e.page.y - (document.body.scrollTop + document.documentElement.scrollTop);\n        } else if (e.pageX) {\n          posx = e.pageX - (document.body.scrollLeft + document.documentElement.scrollLeft);\n          posy = e.pageY - (document.body.scrollTop + document.documentElement.scrollTop);\n        }\n        var numBugs = this.bugs.length,\n          i = 0;\n        for (i = 0; i < numBugs; i++) {\n          var pos = this.bugs[i].getPos();\n          if (pos) {\n            if (Math.abs(pos.top - posy) + Math.abs(pos.left - posx) < this.options.eventDistanceToBug && !this.bugs[i].flyperiodical) {\n              this.near_bug(this.bugs[i]);\n            }\n          }\n        }\n      },\n      near_bug: function (bug) {\n        this.on_bug(bug);\n      },\n      on_bug: function (bug) {\n        if (!bug.alive) {\n          return;\n        }\n        var mode = this.options.mouseOver;\n        if (mode === 'random') {\n          mode = this.modes[this.random(0, this.modes.length - 1, true)];\n        }\n        if (mode === 'fly') {\n          // fly away!\n          bug.stop();\n          bug.flyRand();\n        } else if (mode === 'nothing') {\n          return;\n        } else if (mode === 'flyoff') {\n          // fly away and off the page\n          bug.stop();\n          bug.flyOff();\n        } else if (mode === 'die') {\n          // drop dead!\n          bug.die();\n        } else if (mode === 'multiply') {\n          if (!this.multiplyDelay && this.bugs.length < this.options.maxBugs) {\n            // spawn another:\n            // create new bug:\n            var b = SpawnBug(),\n              options = JSON.parse(JSON.stringify(this.options)),\n              pos = bug.getPos(),\n              that = this;\n            options.wingsOpen = this.options.canFly ? Math.random() > 0.5 ? true : false : true;\n            options.walkSpeed = this.random(this.options.minSpeed, this.options.maxSpeed);\n            b.initialize(this.transform, options);\n            b.drawBug(pos.top, pos.left);\n            // fly them both away:\n            if (options.canFly) {\n              b.flyRand();\n              bug.flyRand();\n            } else {\n              b.go();\n              bug.go();\n            }\n            // store new bug:\n            this.bugs.push(b);\n            // watch out for spawning too quickly:\n            this.multiplyDelay = true;\n            setTimeout(function () {\n              // add event to this bug:\n              that.add_events_to_bug(b);\n              that.multiplyDelay = false;\n            }, this.options.minTimeBetweenMultipy);\n          }\n        }\n      },\n      random: function (min, max, round) {\n        if (min == max) return round ? Math.round(min) : min;\n        var result = min - 0.5 + Math.random() * (max - min + 1);\n        if (result > max) {\n          result = max;\n        } else if (result < min) {\n          result = min;\n        }\n        return round ? Math.round(result) : result;\n      }\n    };\n    var BugController = function () {\n      this.initialize.apply(this, arguments);\n    };\n    BugController.prototype = BugDispatch;\n    var SpiderController = function () {\n      var spiderOptions = {\n        imageSprite: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/191814/spider-sprite.png',\n        bugWidth: 69,\n        bugHeight: 90,\n        num_frames: 7,\n        canFly: false,\n        canDie: true,\n        numDeathTypes: 2,\n        zoom: 6,\n        minDelay: 200,\n        maxDelay: 3000,\n        minSpeed: 6,\n        maxSpeed: 13,\n        minBugs: 3,\n        maxBugs: 10\n      };\n      this.options = mergeOptions(this.options, spiderOptions);\n      this.initialize.apply(this, arguments);\n    };\n    SpiderController.prototype = BugDispatch;\n\n    /***************/\n    /**    Bug    **/\n    /***************/\n\n    var Bug = {\n      options: {\n        wingsOpen: false,\n        walkSpeed: 2,\n        flySpeed: 40,\n        edge_resistance: 50,\n        zoom: 10\n      },\n      initialize: function (transform, options) {\n        this.options = mergeOptions(this.options, options);\n        this.NEAR_TOP_EDGE = 1;\n        this.NEAR_BOTTOM_EDGE = 2;\n        this.NEAR_LEFT_EDGE = 4;\n        this.NEAR_RIGHT_EDGE = 8;\n        this.directions = {}; // 0 degrees starts on the East\n        this.directions[this.NEAR_TOP_EDGE] = 270;\n        this.directions[this.NEAR_BOTTOM_EDGE] = 90;\n        this.directions[this.NEAR_LEFT_EDGE] = 0;\n        this.directions[this.NEAR_RIGHT_EDGE] = 180;\n        this.directions[this.NEAR_TOP_EDGE + this.NEAR_LEFT_EDGE] = 315;\n        this.directions[this.NEAR_TOP_EDGE + this.NEAR_RIGHT_EDGE] = 225;\n        this.directions[this.NEAR_BOTTOM_EDGE + this.NEAR_LEFT_EDGE] = 45;\n        this.directions[this.NEAR_BOTTOM_EDGE + this.NEAR_RIGHT_EDGE] = 135;\n        this.angle_deg = 0;\n        this.angle_rad = 0;\n        this.large_turn_angle_deg = 0;\n        this.near_edge = false;\n        this.edge_test_counter = 10;\n        this.small_turn_counter = 0;\n        this.large_turn_counter = 0;\n        this.fly_counter = 0;\n        this.toggle_stationary_counter = Math.random() * 50;\n        this.zoom = this.random(this.options.zoom, 10) / 10;\n        this.stationary = false;\n        this.bug = null;\n        this.active = true;\n        this.wingsOpen = this.options.wingsOpen;\n        this.transform = transform;\n        this.walkIndex = 0;\n        this.flyIndex = 0;\n        this.alive = true;\n        this.twitchTimer = null;\n        this.rad2deg_k = 180 / Math.PI;\n        this.deg2rad_k = Math.PI / 180;\n        this.makeBug();\n        this.angle_rad = this.deg2rad(this.angle_deg);\n        this.angle_deg = this.random(0, 360, true);\n      },\n      go: function () {\n        if (this.transform) {\n          this.drawBug();\n          var that = this;\n          this.animating = true;\n          this.going = requestAnimFrame(function (t) {\n            that.animate(t);\n          });\n        }\n      },\n      stop: function () {\n        this.animating = false;\n        if (this.going) {\n          clearTimeout(this.going);\n          this.going = null;\n        }\n        if (this.flyperiodical) {\n          clearTimeout(this.flyperiodical);\n          this.flyperiodical = null;\n        }\n        if (this.twitchTimer) {\n          clearTimeout(this.twitchTimer);\n          this.twitchTimer = null;\n        }\n      },\n      remove: function () {\n        this.active = false;\n        if (this.inserted && this.bug.parentNode) {\n          this.bug.parentNode.removeChild(this.bug);\n          this.inserted = false;\n        }\n      },\n      reset: function () {\n        this.alive = true;\n        this.active = true;\n        this.bug.style.bottom = '';\n        this.bug.style.top = 0;\n        this.bug.style.left = 0;\n        this.bug.classList.remove('bug-dead');\n      },\n      animate: function (t) {\n        if (!this.animating || !this.alive || !this.active) return;\n        var that = this;\n        this.going = requestAnimFrame(function (t) {\n          that.animate(t);\n        });\n        if (!('_lastTimestamp' in this)) this._lastTimestamp = t;\n        var delta = t - this._lastTimestamp;\n        if (delta < 40) return; // don't animate too frequently\n\n        // sometimes if the browser doesnt have focus, or the delta in request animation\n        // frame can be very large. We set a sensible max so that the bugs dont spaz out.\n\n        if (delta > 200) delta = 200;\n        this._lastTimestamp = t;\n        if (--this.toggle_stationary_counter <= 0) {\n          this.toggleStationary();\n        }\n        if (this.stationary) {\n          return;\n        }\n        if (--this.edge_test_counter <= 0 && this.bug_near_window_edge()) {\n          // if near edge, go away from edge\n          this.angle_deg %= 360;\n          if (this.angle_deg < 0) this.angle_deg += 360;\n          if (Math.abs(this.directions[this.near_edge] - this.angle_deg) > 15) {\n            var angle1 = this.directions[this.near_edge] - this.angle_deg;\n            var angle2 = 360 - this.angle_deg + this.directions[this.near_edge];\n            this.large_turn_angle_deg = Math.abs(angle1) < Math.abs(angle2) ? angle1 : angle2;\n            this.edge_test_counter = 10;\n            this.large_turn_counter = 100;\n            this.small_turn_counter = 30;\n          }\n        }\n        if (--this.large_turn_counter <= 0) {\n          this.large_turn_angle_deg = this.random(1, this.options.maxLargeTurnDeg, true);\n          this.next_large_turn();\n        }\n        if (--this.small_turn_counter <= 0) {\n          this.angle_deg += this.random(1, this.options.maxSmallTurnDeg);\n          this.next_small_turn();\n        } else {\n          var dangle = this.random(1, this.options.maxWiggleDeg, true);\n          if (this.large_turn_angle_deg > 0 && dangle < 0 || this.large_turn_angle_deg < 0 && dangle > 0) {\n            dangle = -dangle; // ensures both values either + or -\n          }\n\n          this.large_turn_angle_deg -= dangle;\n          this.angle_deg += dangle;\n        }\n        this.angle_rad = this.deg2rad(this.angle_deg);\n        var dx = Math.cos(this.angle_rad) * this.options.walkSpeed * (delta / 100);\n        var dy = -Math.sin(this.angle_rad) * this.options.walkSpeed * (delta / 100);\n        this.moveBug(this.bug.left + dx, this.bug.top + dy, 90 - this.angle_deg);\n        this.walkFrame();\n      },\n      makeBug: function () {\n        if (!this.bug && this.active) {\n          var row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px',\n            bug = document.createElement('div');\n          bug.className = 'bug';\n          bug.style.background = 'transparent url(' + this.options.imageSprite + ') no-repeat 0 ' + row;\n          bug.style.width = this.options.bugWidth + 'px';\n          bug.style.height = this.options.bugHeight + 'px';\n          bug.style.position = 'fixed';\n          bug.style.top = 0;\n          bug.style.left = 0;\n          bug.style.zIndex = '9999999';\n          this.bug = bug;\n          this.setPos();\n        }\n      },\n      setPos: function (top, left) {\n        this.bug.top = top || this.random(this.options.edge_resistance, document.documentElement.clientHeight - this.options.edge_resistance);\n        this.bug.left = left || this.random(this.options.edge_resistance, document.documentElement.clientWidth - this.options.edge_resistance);\n        this.moveBug(this.bug.left, this.bug.top, 90 - this.angle_deg);\n      },\n      moveBug: function (x, y, deg) {\n        // keep track of where we are:\n        this.bug.left = x;\n        this.bug.top = y;\n\n        // transform:\n        var trans = 'translate(' + parseInt(x) + 'px,' + parseInt(y) + 'px)';\n        if (deg) {\n          //console.log(\"translate(\"+(x)+\"px, \"+(y)+\"px) rotate(\"+deg+\"deg)\");\n          trans += ' rotate(' + deg + 'deg)';\n        }\n        trans += ' scale(' + this.zoom + ')';\n        this.transform(trans);\n      },\n      drawBug: function (top, left) {\n        if (!this.bug) {\n          this.makeBug();\n        }\n        if (!this.bug) return;\n        if (top && left) {\n          this.setPos(top, left);\n        } else {\n          this.setPos(this.bug.top, this.bug.left);\n        }\n        if (!this.inserted) {\n          this.inserted = true;\n          document.body.appendChild(this.bug);\n        }\n      },\n      toggleStationary: function () {\n        this.stationary = !this.stationary;\n        this.next_stationary();\n        var ypos = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n        if (this.stationary) {\n          this.bug.style.backgroundPosition = '0 ' + ypos;\n        } else {\n          this.bug.style.backgroundPosition = '-' + this.options.bugWidth + 'px ' + ypos;\n        }\n      },\n      walkFrame: function () {\n        var xpos = -1 * (this.walkIndex * this.options.bugWidth) + 'px',\n          ypos = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n        this.bug.style.backgroundPosition = xpos + ' ' + ypos;\n        this.walkIndex++;\n        if (this.walkIndex >= this.options.num_frames) this.walkIndex = 0;\n      },\n      fly: function (landingPosition) {\n        var currentTop = this.bug.top,\n          currentLeft = this.bug.left,\n          diffx = currentLeft - landingPosition.left,\n          diffy = currentTop - landingPosition.top,\n          angle = Math.atan(diffy / diffx);\n        if (Math.abs(diffx) + Math.abs(diffy) < 50) {\n          this.bug.style.backgroundPosition = -2 * this.options.bugWidth + 'px -' + 2 * this.options.bugHeight + 'px';\n        }\n        if (Math.abs(diffx) + Math.abs(diffy) < 30) {\n          this.bug.style.backgroundPosition = -1 * this.options.bugWidth + 'px -' + 2 * this.options.bugHeight + 'px';\n        }\n        if (Math.abs(diffx) + Math.abs(diffy) < 10) {\n          // close enough:\n          this.bug.style.backgroundPosition = '0 0'; //+row+'px'));\n\n          this.stop();\n          this.go();\n          //this.go.delay(100, this);\n\n          return;\n        }\n\n        // make it wiggle: disabled because its just too fast to see... better would be to make its path wiggly.\n        //angle = angle - (this.deg2rad(this.random(0,10)));\n        //console.log('angle: ',this.rad2deg(angle));\n\n        var dx = Math.cos(angle) * this.options.flySpeed,\n          dy = Math.sin(angle) * this.options.flySpeed;\n        if (currentLeft > landingPosition.left && dx > 0 || currentLeft > landingPosition.left && dx < 0) {\n          // make sure angle is right way\n          dx = -1 * dx;\n          if (Math.abs(diffx) < Math.abs(dx)) {\n            dx = dx / 4;\n          }\n        }\n        if (currentTop < landingPosition.top && dy < 0 || currentTop > landingPosition.top && dy > 0) {\n          dy = -1 * dy;\n          if (Math.abs(diffy) < Math.abs(dy)) {\n            dy = dy / 4;\n          }\n        }\n        this.moveBug(currentLeft + dx, currentTop + dy);\n      },\n      flyRand: function () {\n        this.stop();\n        var landingPosition = {};\n        landingPosition.top = this.random(this.options.edge_resistance, document.documentElement.clientHeight - this.options.edge_resistance);\n        landingPosition.left = this.random(this.options.edge_resistance, document.documentElement.clientWidth - this.options.edge_resistance);\n        this.startFlying(landingPosition);\n      },\n      startFlying: function (landingPosition) {\n        var currentTop = this.bug.top,\n          currentLeft = this.bug.left,\n          diffx = landingPosition.left - currentLeft,\n          diffy = landingPosition.top - currentTop;\n        this.bug.left = landingPosition.left;\n        this.bug.top = landingPosition.top;\n        this.angle_rad = Math.atan(diffy / diffx);\n        this.angle_deg = this.rad2deg(this.angle_rad);\n        if (diffx > 0) {\n          // going left: quadrant 1 or 2\n          this.angle_deg = 90 + this.angle_deg;\n        } else {\n          // going right: quadrant 3 or 4\n          this.angle_deg = 270 + this.angle_deg;\n        }\n        this.moveBug(currentLeft, currentTop, this.angle_deg);\n\n        // start animation:\n        var that = this;\n        this.flyperiodical = setInterval(function () {\n          that.fly(landingPosition);\n        }, 10);\n      },\n      flyIn: function () {\n        if (!this.bug) {\n          this.makeBug();\n        }\n        if (!this.bug) return;\n        this.stop();\n        // pick a random side:\n        var side = Math.round(Math.random() * 4 - 0.5),\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          windowX = window.innerWidth || e.clientWidth || g.clientWidth,\n          windowY = window.innerHeight || e.clientHeight || g.clientHeight;\n        if (side > 3) side = 3;\n        if (side < 0) side = 0;\n        var style = {},\n          s;\n        if (side === 0) {\n          // top:\n          style.top = -2 * this.options.bugHeight;\n          style.left = Math.random() * windowX;\n        } else if (side === 1) {\n          // right:\n          style.top = Math.random() * windowY;\n          style.left = windowX + 2 * this.options.bugWidth;\n        } else if (side === 2) {\n          // bottom:\n          style.top = windowY + 2 * this.options.bugHeight;\n          style.left = Math.random() * windowX;\n        } else {\n          // left:\n          style.top = Math.random() * windowY;\n          style.left = -3 * this.options.bugWidth;\n        }\n        var row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n        this.bug.style.backgroundPosition = -3 * this.options.bugWidth + 'px ' + row;\n        this.bug.top = style.top;\n        this.bug.left = style.left;\n        this.drawBug();\n\n        // landing position:\n        var landingPosition = {};\n        landingPosition.top = this.random(this.options.edge_resistance, document.documentElement.clientHeight - this.options.edge_resistance);\n        landingPosition.left = this.random(this.options.edge_resistance, document.documentElement.clientWidth - this.options.edge_resistance);\n        this.startFlying(landingPosition);\n      },\n      walkIn: function () {\n        if (!this.bug) {\n          this.makeBug();\n        }\n        if (!this.bug) return;\n        this.stop();\n        // pick a random side:\n        var side = Math.round(Math.random() * 4 - 0.5),\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          windowX = window.innerWidth || e.clientWidth || g.clientWidth,\n          windowY = window.innerHeight || e.clientHeight || g.clientHeight;\n        if (side > 3) side = 3;\n        if (side < 0) side = 0;\n        var style = {},\n          s;\n        if (side === 0) {\n          // top:\n          style.top = -1.3 * this.options.bugHeight;\n          style.left = Math.random() * windowX;\n        } else if (side === 1) {\n          // right:\n          style.top = Math.random() * windowY;\n          style.left = windowX + 0.3 * this.options.bugWidth;\n        } else if (side === 2) {\n          // bottom:\n          style.top = windowY + 0.3 * this.options.bugHeight;\n          style.left = Math.random() * windowX;\n        } else {\n          // left:\n          style.top = Math.random() * windowY;\n          style.left = -1.3 * this.options.bugWidth;\n        }\n        var row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n        this.bug.style.backgroundPosition = -3 * this.options.bugWidth + 'px ' + row;\n        this.bug.top = style.top;\n        this.bug.left = style.left;\n        this.drawBug();\n\n        // start walking:\n        this.go();\n      },\n      flyOff: function () {\n        this.stop();\n        // pick a random side to fly off to, where 0 is top and continuing clockwise.\n        var side = this.random(0, 3),\n          style = {},\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          windowX = window.innerWidth || e.clientWidth || g.clientWidth,\n          windowY = window.innerHeight || e.clientHeight || g.clientHeight;\n        if (side === 0) {\n          // top:\n          style.top = -200;\n          style.left = Math.random() * windowX;\n        } else if (side === 1) {\n          // right:\n          style.top = Math.random() * windowY;\n          style.left = windowX + 200;\n        } else if (side === 2) {\n          //bottom:\n          style.top = windowY + 200;\n          style.left = Math.random() * windowX;\n        } else {\n          // left:\n          style.top = Math.random() * windowY;\n          style.left = -200;\n        }\n        this.startFlying(style);\n      },\n      die: function () {\n        this.stop();\n        //pick death style:\n        var deathType = this.random(0, this.options.numDeathTypes - 1);\n        this.alive = false;\n        this.drop(deathType);\n      },\n      drop: function (deathType) {\n        var startPos = this.bug.top,\n          d = document,\n          e = d.documentElement,\n          g = d.getElementsByTagName('body')[0],\n          finalPos = window.innerHeight || e.clientHeight || g.clientHeight,\n          finalPos = finalPos - this.options.bugHeight,\n          rotationRate = this.random(0, 20, true),\n          startTime = Date.now(),\n          that = this;\n        this.bug.classList.add('bug-dead');\n        this.dropTimer = requestAnimFrame(function (t) {\n          that._lastTimestamp = t;\n          that.dropping(t, startPos, finalPos, rotationRate, deathType);\n        });\n      },\n      dropping: function (t, startPos, finalPos, rotationRate, deathType) {\n        var elapsedTime = t - this._lastTimestamp,\n          deltaPos = 0.002 * (elapsedTime * elapsedTime),\n          newPos = startPos + deltaPos;\n        //console.log(t, elapsedTime, deltaPos, newPos);\n\n        var that = this;\n        if (newPos >= finalPos) {\n          newPos = finalPos;\n          clearTimeout(this.dropTimer);\n          this.angle_deg = 0;\n          this.angle_rad = this.deg2rad(this.angle_deg);\n          this.transform('rotate(' + (90 - this.angle_deg) + 'deg) scale(' + this.zoom + ')');\n          this.bug.style.top = null;\n          // because it is (or might be) zoomed and rotated, we cannot just just bottom = 0. Figure out real bottom position:\n          var rotationOffset = (this.options.bugWidth * this.zoom - this.options.bugHeight * this.zoom) / 2;\n          var zoomOffset = this.options.bugHeight / 2 * (1 - this.zoom);\n          this.bug.style.bottom = Math.ceil(rotationOffset - zoomOffset) + 'px'; // because its rotated and zoomed.\n          this.bug.style.left = this.bug.left + 'px';\n          this.bug.style.backgroundPosition = '-' + deathType * 2 * this.options.bugWidth + 'px 100%';\n          this.twitch(deathType);\n          return;\n        }\n        this.dropTimer = requestAnimFrame(function (t) {\n          that.dropping(t, startPos, finalPos, rotationRate, deathType);\n        });\n        if (elapsedTime < 20) return;\n        this.angle_deg = (this.angle_deg + rotationRate) % 360;\n        this.angle_rad = this.deg2rad(this.angle_deg);\n        this.moveBug(this.bug.left, newPos, this.angle_deg);\n      },\n      twitch: function (deathType, legPos) {\n        //this.bug.style.back\n        if (!legPos) legPos = 0;\n        var that = this;\n        if (deathType === 0 || deathType === 1) {\n          that.twitchTimer = setTimeout(function () {\n            that.bug.style.backgroundPosition = '-' + (deathType * 2 + legPos % 2) * that.options.bugWidth + 'px 100%';\n            that.twitchTimer = setTimeout(function () {\n              legPos++;\n              that.bug.style.backgroundPosition = '-' + (deathType * 2 + legPos % 2) * that.options.bugWidth + 'px 100%';\n              that.twitch(deathType, ++legPos);\n            }, that.random(300, 800));\n          }, this.random(1000, 10000));\n        }\n      },\n      /* helper methods: */\n      rad2deg: function (rad) {\n        return rad * this.rad2deg_k;\n      },\n      deg2rad: function (deg) {\n        return deg * this.deg2rad_k;\n      },\n      random: function (min, max, plusminus) {\n        if (min == max) return min;\n        var result = Math.round(min - 0.5 + Math.random() * (max - min + 1));\n        if (plusminus) return Math.random() > 0.5 ? result : -result;\n        return result;\n      },\n      next_small_turn: function () {\n        this.small_turn_counter = Math.round(Math.random() * 10);\n      },\n      next_large_turn: function () {\n        this.large_turn_counter = Math.round(Math.random() * 40);\n      },\n      next_stationary: function () {\n        this.toggle_stationary_counter = this.random(50, 300);\n      },\n      bug_near_window_edge: function () {\n        this.near_edge = 0;\n        if (this.bug.top < this.options.edge_resistance) this.near_edge |= this.NEAR_TOP_EDGE;else if (this.bug.top > document.documentElement.clientHeight - this.options.edge_resistance) this.near_edge |= this.NEAR_BOTTOM_EDGE;\n        if (this.bug.left < this.options.edge_resistance) this.near_edge |= this.NEAR_LEFT_EDGE;else if (this.bug.left > document.documentElement.clientWidth - this.options.edge_resistance) this.near_edge |= this.NEAR_RIGHT_EDGE;\n        return this.near_edge;\n      },\n      getPos: function () {\n        if (this.inserted && this.bug && this.bug.style) {\n          return {\n            top: parseInt(this.bug.top, 10),\n            left: parseInt(this.bug.left, 10)\n          };\n        }\n        return null;\n      }\n    };\n    var SpawnBug = function () {\n      var newBug = {},\n        prop;\n      for (prop in Bug) {\n        if (Bug.hasOwnProperty(prop)) {\n          newBug[prop] = Bug[prop];\n        }\n      }\n      return newBug;\n    };\n\n    // debated about which pattern to use to instantiate each bug...\n    // see http://jsperf.com/obj-vs-prototype-vs-other\n\n    /**\n     * Helper methods:\n     **/\n\n    var mergeOptions = function (obj1, obj2, clone) {\n      if (typeof clone == 'undefined') {\n        clone = true;\n      }\n      var newobj = clone ? cloneOf(obj1) : obj1;\n      for (var key in obj2) {\n        if (obj2.hasOwnProperty(key)) {\n          newobj[key] = obj2[key];\n        }\n      }\n      return newobj;\n    };\n    var cloneOf = function (obj) {\n      if (obj == null || typeof obj != 'object') return obj;\n      var temp = obj.constructor(); // changed\n\n      for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          temp[key] = cloneOf(obj[key]);\n        }\n      }\n      return temp;\n    };\n\n    /* Request animation frame polyfill */\n    /* http://paulirish.com/2011/requestanimationframe-for-smart-animating/ */\n    window.requestAnimFrame = function () {\n      return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function ( /* function */callback, /* DOMElement */element) {\n        window.setTimeout(callback, 1000 / 60);\n      };\n    }();\n\n    // default fruit fly bug:\n    new BugController({});\n\n    // default spiders:\n    new SpiderController({});\n\n    // 1030 lines of code. OOF.\n  }, []);\n};\n_s(bugsOnTheLoose, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\nexport default bugsOnTheLoose;","map":{"version":3,"names":["useEffect","bugsOnTheLoose","_s","BugDispatch","options","minDelay","maxDelay","minBugs","maxBugs","minSpeed","maxSpeed","maxLargeTurnDeg","maxSmallTurnDeg","maxWiggleDeg","imageSprite","bugWidth","bugHeight","num_frames","zoom","canFly","canDie","numDeathTypes","monitorMouseMovement","eventDistanceToBug","minTimeBetweenMultipy","mouseOver","initialize","mergeOptions","modes","push","indexOf","transform","transforms","Moz","s","bug","style","MozTransform","webkit","webkitTransform","O","OTransform","ms","msTransform","Khtml","KhtmlTransform","w3c","document","documentElement","vendors","i","length","bugs","numBugs","random","that","JSON","parse","stringify","b","SpawnBug","wingsOpen","Math","walkSpeed","spawnDelay","delay","thebug","setTimeout","flyIn","walkIn","add_events_to_bug","window","onmousemove","check_if_mouse_close_to_bug","stop","clearTimeout","end","remove","reset","killAll","die","addEventListener","e","on_bug","attachEvent","event","posx","posy","client","x","y","clientX","clientY","page","body","scrollLeft","scrollTop","pageX","pageY","pos","getPos","abs","top","left","flyperiodical","near_bug","alive","mode","flyRand","flyOff","multiplyDelay","drawBug","go","min","max","round","result","BugController","apply","arguments","prototype","SpiderController","spiderOptions","Bug","flySpeed","edge_resistance","NEAR_TOP_EDGE","NEAR_BOTTOM_EDGE","NEAR_LEFT_EDGE","NEAR_RIGHT_EDGE","directions","angle_deg","angle_rad","large_turn_angle_deg","near_edge","edge_test_counter","small_turn_counter","large_turn_counter","fly_counter","toggle_stationary_counter","stationary","active","walkIndex","flyIndex","twitchTimer","rad2deg_k","PI","deg2rad_k","makeBug","deg2rad","animating","going","requestAnimFrame","t","animate","inserted","parentNode","removeChild","bottom","classList","_lastTimestamp","delta","toggleStationary","bug_near_window_edge","angle1","angle2","next_large_turn","next_small_turn","dangle","dx","cos","dy","sin","moveBug","walkFrame","row","createElement","className","background","width","height","position","zIndex","setPos","clientHeight","clientWidth","deg","trans","parseInt","appendChild","next_stationary","ypos","backgroundPosition","xpos","fly","landingPosition","currentTop","currentLeft","diffx","diffy","angle","atan","startFlying","rad2deg","setInterval","side","d","g","getElementsByTagName","windowX","innerWidth","windowY","innerHeight","deathType","drop","startPos","finalPos","rotationRate","startTime","Date","now","add","dropTimer","dropping","elapsedTime","deltaPos","newPos","rotationOffset","zoomOffset","ceil","twitch","legPos","rad","plusminus","newBug","prop","hasOwnProperty","obj1","obj2","clone","newobj","cloneOf","key","obj","temp","constructor","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element"],"sources":["/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/src/utils/scripts/bugsOnTheLoose.js"],"sourcesContent":["import { useEffect } from 'react';\n\nconst bugsOnTheLoose = () => {\n\tuseEffect(() => {\n\t\tvar BugDispatch = {\n\t\t\toptions: {\n\t\t\t\tminDelay: 500,\n\t\t\t\tmaxDelay: 10000,\n\t\t\t\tminBugs: 2,\n\t\t\t\tmaxBugs: 20,\n\t\t\t\tminSpeed: 5,\n\t\t\t\tmaxSpeed: 10,\n\t\t\t\tmaxLargeTurnDeg: 150,\n\t\t\t\tmaxSmallTurnDeg: 10,\n\t\t\t\tmaxWiggleDeg: 5,\n\t\t\t\timageSprite: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/191814/fly-sprite.png',\n\t\t\t\tbugWidth: 13,\n\t\t\t\tbugHeight: 14,\n\t\t\t\tnum_frames: 5,\n\t\t\t\tzoom: 10, // random zoom variation from 1 to 10 - 10 being full size.\n\t\t\t\tcanFly: true,\n\t\t\t\tcanDie: true,\n\t\t\t\tnumDeathTypes: 3,\n\t\t\t\tmonitorMouseMovement: false,\n\t\t\t\teventDistanceToBug: 40,\n\t\t\t\tminTimeBetweenMultipy: 1000,\n\t\t\t\tmouseOver: 'random', // can be 'fly', 'flyoff' (if the bug can fly), die', 'multiply', 'nothing' or 'random'\n\t\t\t},\n\n\t\t\tinitialize: function (options) {\n\t\t\t\tthis.options = mergeOptions(this.options, options);\n\n\t\t\t\t// sanity check:\n\t\t\t\tif (this.options.minBugs > this.options.maxBugs) {\n\t\t\t\t\tthis.options.minBugs = this.options.maxBugs;\n\t\t\t\t}\n\n\t\t\t\tthis.modes = ['multiply', 'nothing'];\n\n\t\t\t\tif (this.options.canFly) {\n\t\t\t\t\tthis.modes.push('fly', 'flyoff');\n\t\t\t\t}\n\t\t\t\tif (this.options.canDie) {\n\t\t\t\t\tthis.modes.push('die');\n\t\t\t\t}\n\n\t\t\t\tif (this.modes.indexOf(this.options.mouseOver) == -1) {\n\t\t\t\t\t// invalid mode: use random:\n\t\t\t\t\tthis.options.mouseOver = 'random';\n\t\t\t\t}\n\n\t\t\t\t// can we transform?\n\t\t\t\tthis.transform = null;\n\n\t\t\t\tthis.transforms = {\n\t\t\t\t\tMoz: function (s) {\n\t\t\t\t\t\tthis.bug.style.MozTransform = s;\n\t\t\t\t\t},\n\t\t\t\t\twebkit: function (s) {\n\t\t\t\t\t\tthis.bug.style.webkitTransform = s;\n\t\t\t\t\t},\n\t\t\t\t\tO: function (s) {\n\t\t\t\t\t\tthis.bug.style.OTransform = s;\n\t\t\t\t\t},\n\t\t\t\t\tms: function (s) {\n\t\t\t\t\t\tthis.bug.style.msTransform = s;\n\t\t\t\t\t},\n\t\t\t\t\tKhtml: function (s) {\n\t\t\t\t\t\tthis.bug.style.KhtmlTransform = s;\n\t\t\t\t\t},\n\t\t\t\t\tw3c: function (s) {\n\t\t\t\t\t\tthis.bug.style.transform = s;\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\t// check to see if it is a modern browser:\n\n\t\t\t\tif ('transform' in document.documentElement.style) {\n\t\t\t\t\tthis.transform = this.transforms.w3c;\n\t\t\t\t} else {\n\t\t\t\t\t// feature detection for the other transforms:\n\t\t\t\t\tvar vendors = ['Moz', 'webkit', 'O', 'ms', 'Khtml'],\n\t\t\t\t\t\ti = 0;\n\n\t\t\t\t\tfor (i = 0; i < vendors.length; i++) {\n\t\t\t\t\t\tif (vendors[i] + 'Transform' in document.documentElement.style) {\n\t\t\t\t\t\t\tthis.transform = this.transforms[vendors[i]];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// dont support transforms... quit\n\t\t\t\tif (!this.transform) return;\n\n\t\t\t\t// make bugs:\n\t\t\t\tthis.bugs = [];\n\t\t\t\tvar numBugs =\n\t\t\t\t\t\tthis.options.mouseOver === 'multiply'\n\t\t\t\t\t\t\t? this.options.minBugs\n\t\t\t\t\t\t\t: this.random(this.options.minBugs, this.options.maxBugs, true),\n\t\t\t\t\ti = 0,\n\t\t\t\t\tthat = this;\n\n\t\t\t\tfor (i = 0; i < numBugs; i++) {\n\t\t\t\t\tvar options = JSON.parse(JSON.stringify(this.options)),\n\t\t\t\t\t\tb = SpawnBug();\n\n\t\t\t\t\t(options.wingsOpen = this.options.canFly ? (Math.random() > 0.5 ? true : false) : true),\n\t\t\t\t\t\t(options.walkSpeed = this.random(this.options.minSpeed, this.options.maxSpeed)),\n\t\t\t\t\t\tb.initialize(this.transform, options);\n\t\t\t\t\tthis.bugs.push(b);\n\t\t\t\t}\n\n\t\t\t\t// fly them in staggered:\n\t\t\t\tthis.spawnDelay = [];\n\t\t\t\tfor (i = 0; i < numBugs; i++) {\n\t\t\t\t\tvar delay = this.random(this.options.minDelay, this.options.maxDelay, true),\n\t\t\t\t\t\tthebug = this.bugs[i];\n\t\t\t\t\t// fly the bug onto the page:\n\t\t\t\t\tthis.spawnDelay[i] = setTimeout(\n\t\t\t\t\t\t(function (thebug) {\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\tif (that.options.canFly) {\n\t\t\t\t\t\t\t\t\tthebug.flyIn();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthebug.walkIn();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})(thebug),\n\t\t\t\t\t\tdelay\n\t\t\t\t\t);\n\n\t\t\t\t\t// add mouse over events:\n\t\t\t\t\tthat.add_events_to_bug(thebug);\n\t\t\t\t}\n\n\t\t\t\t// add window event if required:\n\t\t\t\tif (this.options.monitorMouseMovement) {\n\t\t\t\t\twindow.onmousemove = function () {\n\t\t\t\t\t\tthat.check_if_mouse_close_to_bug();\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstop: function () {\n\t\t\t\tfor (var i = 0; i < this.bugs.length; i++) {\n\t\t\t\t\tif (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n\t\t\t\t\tthis.bugs[i].stop();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tend: function () {\n\t\t\t\tfor (var i = 0; i < this.bugs.length; i++) {\n\t\t\t\t\tif (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n\t\t\t\t\tthis.bugs[i].stop();\n\t\t\t\t\tthis.bugs[i].remove();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\treset: function () {\n\t\t\t\tthis.stop();\n\t\t\t\tfor (var i = 0; i < this.bugs.length; i++) {\n\t\t\t\t\tthis.bugs[i].reset();\n\t\t\t\t\tthis.bugs[i].walkIn();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tkillAll: function () {\n\t\t\t\tfor (var i = 0; i < this.bugs.length; i++) {\n\t\t\t\t\tif (this.spawnDelay[i]) clearTimeout(this.spawnDelay[i]);\n\t\t\t\t\tthis.bugs[i].die();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tadd_events_to_bug: function (thebug) {\n\t\t\t\tvar that = this;\n\t\t\t\tif (thebug.bug) {\n\t\t\t\t\tif (thebug.bug.addEventListener) {\n\t\t\t\t\t\tthebug.bug.addEventListener('mouseover', function (e) {\n\t\t\t\t\t\t\tthat.on_bug(thebug);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if (thebug.bug.attachEvent) {\n\t\t\t\t\t\tthebug.bug.attachEvent('onmouseover', function (e) {\n\t\t\t\t\t\t\tthat.on_bug(thebug);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tcheck_if_mouse_close_to_bug: function (e) {\n\t\t\t\te = e || window.event;\n\t\t\t\tif (!e) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar posx = 0,\n\t\t\t\t\tposy = 0;\n\t\t\t\tif (e.client && e.client.x) {\n\t\t\t\t\tposx = e.client.x;\n\t\t\t\t\tposy = e.client.y;\n\t\t\t\t} else if (e.clientX) {\n\t\t\t\t\tposx = e.clientX;\n\t\t\t\t\tposy = e.clientY;\n\t\t\t\t} else if (e.page && e.page.x) {\n\t\t\t\t\tposx = e.page.x - (document.body.scrollLeft + document.documentElement.scrollLeft);\n\t\t\t\t\tposy = e.page.y - (document.body.scrollTop + document.documentElement.scrollTop);\n\t\t\t\t} else if (e.pageX) {\n\t\t\t\t\tposx = e.pageX - (document.body.scrollLeft + document.documentElement.scrollLeft);\n\t\t\t\t\tposy = e.pageY - (document.body.scrollTop + document.documentElement.scrollTop);\n\t\t\t\t}\n\t\t\t\tvar numBugs = this.bugs.length,\n\t\t\t\t\ti = 0;\n\t\t\t\tfor (i = 0; i < numBugs; i++) {\n\t\t\t\t\tvar pos = this.bugs[i].getPos();\n\t\t\t\t\tif (pos) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tMath.abs(pos.top - posy) + Math.abs(pos.left - posx) < this.options.eventDistanceToBug &&\n\t\t\t\t\t\t\t!this.bugs[i].flyperiodical\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.near_bug(this.bugs[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tnear_bug: function (bug) {\n\t\t\t\tthis.on_bug(bug);\n\t\t\t},\n\n\t\t\ton_bug: function (bug) {\n\t\t\t\tif (!bug.alive) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar mode = this.options.mouseOver;\n\n\t\t\t\tif (mode === 'random') {\n\t\t\t\t\tmode = this.modes[this.random(0, this.modes.length - 1, true)];\n\t\t\t\t}\n\n\t\t\t\tif (mode === 'fly') {\n\t\t\t\t\t// fly away!\n\t\t\t\t\tbug.stop();\n\t\t\t\t\tbug.flyRand();\n\t\t\t\t} else if (mode === 'nothing') {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (mode === 'flyoff') {\n\t\t\t\t\t// fly away and off the page\n\t\t\t\t\tbug.stop();\n\t\t\t\t\tbug.flyOff();\n\t\t\t\t} else if (mode === 'die') {\n\t\t\t\t\t// drop dead!\n\t\t\t\t\tbug.die();\n\t\t\t\t} else if (mode === 'multiply') {\n\t\t\t\t\tif (!this.multiplyDelay && this.bugs.length < this.options.maxBugs) {\n\t\t\t\t\t\t// spawn another:\n\t\t\t\t\t\t// create new bug:\n\t\t\t\t\t\tvar b = SpawnBug(),\n\t\t\t\t\t\t\toptions = JSON.parse(JSON.stringify(this.options)),\n\t\t\t\t\t\t\tpos = bug.getPos(),\n\t\t\t\t\t\t\tthat = this;\n\n\t\t\t\t\t\toptions.wingsOpen = this.options.canFly ? (Math.random() > 0.5 ? true : false) : true;\n\t\t\t\t\t\toptions.walkSpeed = this.random(this.options.minSpeed, this.options.maxSpeed);\n\n\t\t\t\t\t\tb.initialize(this.transform, options);\n\t\t\t\t\t\tb.drawBug(pos.top, pos.left);\n\t\t\t\t\t\t// fly them both away:\n\t\t\t\t\t\tif (options.canFly) {\n\t\t\t\t\t\t\tb.flyRand();\n\t\t\t\t\t\t\tbug.flyRand();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tb.go();\n\t\t\t\t\t\t\tbug.go();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// store new bug:\n\t\t\t\t\t\tthis.bugs.push(b);\n\t\t\t\t\t\t// watch out for spawning too quickly:\n\t\t\t\t\t\tthis.multiplyDelay = true;\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t// add event to this bug:\n\t\t\t\t\t\t\tthat.add_events_to_bug(b);\n\t\t\t\t\t\t\tthat.multiplyDelay = false;\n\t\t\t\t\t\t}, this.options.minTimeBetweenMultipy);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trandom: function (min, max, round) {\n\t\t\t\tif (min == max) return round ? Math.round(min) : min;\n\n\t\t\t\tvar result = min - 0.5 + Math.random() * (max - min + 1);\n\t\t\t\tif (result > max) {\n\t\t\t\t\tresult = max;\n\t\t\t\t} else if (result < min) {\n\t\t\t\t\tresult = min;\n\t\t\t\t}\n\t\t\t\treturn round ? Math.round(result) : result;\n\t\t\t},\n\t\t};\n\n\t\tvar BugController = function () {\n\t\t\tthis.initialize.apply(this, arguments);\n\t\t};\n\t\tBugController.prototype = BugDispatch;\n\n\t\tvar SpiderController = function () {\n\t\t\tvar spiderOptions = {\n\t\t\t\timageSprite: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/191814/spider-sprite.png',\n\t\t\t\tbugWidth: 69,\n\t\t\t\tbugHeight: 90,\n\t\t\t\tnum_frames: 7,\n\t\t\t\tcanFly: false,\n\t\t\t\tcanDie: true,\n\t\t\t\tnumDeathTypes: 2,\n\t\t\t\tzoom: 6,\n\t\t\t\tminDelay: 200,\n\t\t\t\tmaxDelay: 3000,\n\t\t\t\tminSpeed: 6,\n\t\t\t\tmaxSpeed: 13,\n\t\t\t\tminBugs: 3,\n\t\t\t\tmaxBugs: 10,\n\t\t\t};\n\t\t\tthis.options = mergeOptions(this.options, spiderOptions);\n\t\t\tthis.initialize.apply(this, arguments);\n\t\t};\n\t\tSpiderController.prototype = BugDispatch;\n\n\t\t/***************/\n\t\t/**    Bug    **/\n\t\t/***************/\n\n\t\tvar Bug = {\n\t\t\toptions: {\n\t\t\t\twingsOpen: false,\n\t\t\t\twalkSpeed: 2,\n\t\t\t\tflySpeed: 40,\n\t\t\t\tedge_resistance: 50,\n\t\t\t\tzoom: 10,\n\t\t\t},\n\n\t\t\tinitialize: function (transform, options) {\n\t\t\t\tthis.options = mergeOptions(this.options, options);\n\n\t\t\t\tthis.NEAR_TOP_EDGE = 1;\n\t\t\t\tthis.NEAR_BOTTOM_EDGE = 2;\n\t\t\t\tthis.NEAR_LEFT_EDGE = 4;\n\t\t\t\tthis.NEAR_RIGHT_EDGE = 8;\n\t\t\t\tthis.directions = {}; // 0 degrees starts on the East\n\t\t\t\tthis.directions[this.NEAR_TOP_EDGE] = 270;\n\t\t\t\tthis.directions[this.NEAR_BOTTOM_EDGE] = 90;\n\t\t\t\tthis.directions[this.NEAR_LEFT_EDGE] = 0;\n\t\t\t\tthis.directions[this.NEAR_RIGHT_EDGE] = 180;\n\t\t\t\tthis.directions[this.NEAR_TOP_EDGE + this.NEAR_LEFT_EDGE] = 315;\n\t\t\t\tthis.directions[this.NEAR_TOP_EDGE + this.NEAR_RIGHT_EDGE] = 225;\n\t\t\t\tthis.directions[this.NEAR_BOTTOM_EDGE + this.NEAR_LEFT_EDGE] = 45;\n\t\t\t\tthis.directions[this.NEAR_BOTTOM_EDGE + this.NEAR_RIGHT_EDGE] = 135;\n\n\t\t\t\tthis.angle_deg = 0;\n\t\t\t\tthis.angle_rad = 0;\n\t\t\t\tthis.large_turn_angle_deg = 0;\n\t\t\t\tthis.near_edge = false;\n\t\t\t\tthis.edge_test_counter = 10;\n\t\t\t\tthis.small_turn_counter = 0;\n\t\t\t\tthis.large_turn_counter = 0;\n\t\t\t\tthis.fly_counter = 0;\n\t\t\t\tthis.toggle_stationary_counter = Math.random() * 50;\n\t\t\t\tthis.zoom = this.random(this.options.zoom, 10) / 10;\n\n\t\t\t\tthis.stationary = false;\n\t\t\t\tthis.bug = null;\n\t\t\t\tthis.active = true;\n\t\t\t\tthis.wingsOpen = this.options.wingsOpen;\n\t\t\t\tthis.transform = transform;\n\t\t\t\tthis.walkIndex = 0;\n\t\t\t\tthis.flyIndex = 0;\n\t\t\t\tthis.alive = true;\n\t\t\t\tthis.twitchTimer = null;\n\n\t\t\t\tthis.rad2deg_k = 180 / Math.PI;\n\t\t\t\tthis.deg2rad_k = Math.PI / 180;\n\n\t\t\t\tthis.makeBug();\n\n\t\t\t\tthis.angle_rad = this.deg2rad(this.angle_deg);\n\n\t\t\t\tthis.angle_deg = this.random(0, 360, true);\n\t\t\t},\n\n\t\t\tgo: function () {\n\t\t\t\tif (this.transform) {\n\t\t\t\t\tthis.drawBug();\n\t\t\t\t\tvar that = this;\n\n\t\t\t\t\tthis.animating = true;\n\n\t\t\t\t\tthis.going = requestAnimFrame(function (t) {\n\t\t\t\t\t\tthat.animate(t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstop: function () {\n\t\t\t\tthis.animating = false;\n\t\t\t\tif (this.going) {\n\t\t\t\t\tclearTimeout(this.going);\n\t\t\t\t\tthis.going = null;\n\t\t\t\t}\n\t\t\t\tif (this.flyperiodical) {\n\t\t\t\t\tclearTimeout(this.flyperiodical);\n\t\t\t\t\tthis.flyperiodical = null;\n\t\t\t\t}\n\t\t\t\tif (this.twitchTimer) {\n\t\t\t\t\tclearTimeout(this.twitchTimer);\n\t\t\t\t\tthis.twitchTimer = null;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tremove: function () {\n\t\t\t\tthis.active = false;\n\t\t\t\tif (this.inserted && this.bug.parentNode) {\n\t\t\t\t\tthis.bug.parentNode.removeChild(this.bug);\n\t\t\t\t\tthis.inserted = false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\treset: function () {\n\t\t\t\tthis.alive = true;\n\t\t\t\tthis.active = true;\n\t\t\t\tthis.bug.style.bottom = '';\n\t\t\t\tthis.bug.style.top = 0;\n\t\t\t\tthis.bug.style.left = 0;\n\t\t\t\tthis.bug.classList.remove('bug-dead');\n\t\t\t},\n\n\t\t\tanimate: function (t) {\n\t\t\t\tif (!this.animating || !this.alive || !this.active) return;\n\n\t\t\t\tvar that = this;\n\t\t\t\tthis.going = requestAnimFrame(function (t) {\n\t\t\t\t\tthat.animate(t);\n\t\t\t\t});\n\n\t\t\t\tif (!('_lastTimestamp' in this)) this._lastTimestamp = t;\n\n\t\t\t\tvar delta = t - this._lastTimestamp;\n\n\t\t\t\tif (delta < 40) return; // don't animate too frequently\n\n\t\t\t\t// sometimes if the browser doesnt have focus, or the delta in request animation\n\t\t\t\t// frame can be very large. We set a sensible max so that the bugs dont spaz out.\n\n\t\t\t\tif (delta > 200) delta = 200;\n\n\t\t\t\tthis._lastTimestamp = t;\n\n\t\t\t\tif (--this.toggle_stationary_counter <= 0) {\n\t\t\t\t\tthis.toggleStationary();\n\t\t\t\t}\n\t\t\t\tif (this.stationary) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (--this.edge_test_counter <= 0 && this.bug_near_window_edge()) {\n\t\t\t\t\t// if near edge, go away from edge\n\t\t\t\t\tthis.angle_deg %= 360;\n\t\t\t\t\tif (this.angle_deg < 0) this.angle_deg += 360;\n\n\t\t\t\t\tif (Math.abs(this.directions[this.near_edge] - this.angle_deg) > 15) {\n\t\t\t\t\t\tvar angle1 = this.directions[this.near_edge] - this.angle_deg;\n\t\t\t\t\t\tvar angle2 = 360 - this.angle_deg + this.directions[this.near_edge];\n\t\t\t\t\t\tthis.large_turn_angle_deg = Math.abs(angle1) < Math.abs(angle2) ? angle1 : angle2;\n\n\t\t\t\t\t\tthis.edge_test_counter = 10;\n\t\t\t\t\t\tthis.large_turn_counter = 100;\n\t\t\t\t\t\tthis.small_turn_counter = 30;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (--this.large_turn_counter <= 0) {\n\t\t\t\t\tthis.large_turn_angle_deg = this.random(1, this.options.maxLargeTurnDeg, true);\n\t\t\t\t\tthis.next_large_turn();\n\t\t\t\t}\n\t\t\t\tif (--this.small_turn_counter <= 0) {\n\t\t\t\t\tthis.angle_deg += this.random(1, this.options.maxSmallTurnDeg);\n\t\t\t\t\tthis.next_small_turn();\n\t\t\t\t} else {\n\t\t\t\t\tvar dangle = this.random(1, this.options.maxWiggleDeg, true);\n\t\t\t\t\tif (\n\t\t\t\t\t\t(this.large_turn_angle_deg > 0 && dangle < 0) ||\n\t\t\t\t\t\t(this.large_turn_angle_deg < 0 && dangle > 0)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdangle = -dangle; // ensures both values either + or -\n\t\t\t\t\t}\n\t\t\t\t\tthis.large_turn_angle_deg -= dangle;\n\t\t\t\t\tthis.angle_deg += dangle;\n\t\t\t\t}\n\n\t\t\t\tthis.angle_rad = this.deg2rad(this.angle_deg);\n\n\t\t\t\tvar dx = Math.cos(this.angle_rad) * this.options.walkSpeed * (delta / 100);\n\t\t\t\tvar dy = -Math.sin(this.angle_rad) * this.options.walkSpeed * (delta / 100);\n\n\t\t\t\tthis.moveBug(this.bug.left + dx, this.bug.top + dy, 90 - this.angle_deg);\n\t\t\t\tthis.walkFrame();\n\t\t\t},\n\n\t\t\tmakeBug: function () {\n\t\t\t\tif (!this.bug && this.active) {\n\t\t\t\t\tvar row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px',\n\t\t\t\t\t\tbug = document.createElement('div');\n\t\t\t\t\tbug.className = 'bug';\n\t\t\t\t\tbug.style.background = 'transparent url(' + this.options.imageSprite + ') no-repeat 0 ' + row;\n\t\t\t\t\tbug.style.width = this.options.bugWidth + 'px';\n\t\t\t\t\tbug.style.height = this.options.bugHeight + 'px';\n\t\t\t\t\tbug.style.position = 'fixed';\n\t\t\t\t\tbug.style.top = 0;\n\t\t\t\t\tbug.style.left = 0;\n\t\t\t\t\tbug.style.zIndex = '9999999';\n\n\t\t\t\t\tthis.bug = bug;\n\t\t\t\t\tthis.setPos();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetPos: function (top, left) {\n\t\t\t\tthis.bug.top =\n\t\t\t\t\ttop ||\n\t\t\t\t\tthis.random(\n\t\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\t\tdocument.documentElement.clientHeight - this.options.edge_resistance\n\t\t\t\t\t);\n\n\t\t\t\tthis.bug.left =\n\t\t\t\t\tleft ||\n\t\t\t\t\tthis.random(\n\t\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\t\tdocument.documentElement.clientWidth - this.options.edge_resistance\n\t\t\t\t\t);\n\n\t\t\t\tthis.moveBug(this.bug.left, this.bug.top, 90 - this.angle_deg);\n\t\t\t},\n\n\t\t\tmoveBug: function (x, y, deg) {\n\t\t\t\t// keep track of where we are:\n\t\t\t\tthis.bug.left = x;\n\t\t\t\tthis.bug.top = y;\n\n\t\t\t\t// transform:\n\t\t\t\tvar trans = 'translate(' + parseInt(x) + 'px,' + parseInt(y) + 'px)';\n\t\t\t\tif (deg) {\n\t\t\t\t\t//console.log(\"translate(\"+(x)+\"px, \"+(y)+\"px) rotate(\"+deg+\"deg)\");\n\t\t\t\t\ttrans += ' rotate(' + deg + 'deg)';\n\t\t\t\t}\n\t\t\t\ttrans += ' scale(' + this.zoom + ')';\n\n\t\t\t\tthis.transform(trans);\n\t\t\t},\n\n\t\t\tdrawBug: function (top, left) {\n\t\t\t\tif (!this.bug) {\n\t\t\t\t\tthis.makeBug();\n\t\t\t\t}\n\t\t\t\tif (!this.bug) return;\n\n\t\t\t\tif (top && left) {\n\t\t\t\t\tthis.setPos(top, left);\n\t\t\t\t} else {\n\t\t\t\t\tthis.setPos(this.bug.top, this.bug.left);\n\t\t\t\t}\n\t\t\t\tif (!this.inserted) {\n\t\t\t\t\tthis.inserted = true;\n\t\t\t\t\tdocument.body.appendChild(this.bug);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\ttoggleStationary: function () {\n\t\t\t\tthis.stationary = !this.stationary;\n\t\t\t\tthis.next_stationary();\n\t\t\t\tvar ypos = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n\t\t\t\tif (this.stationary) {\n\t\t\t\t\tthis.bug.style.backgroundPosition = '0 ' + ypos;\n\t\t\t\t} else {\n\t\t\t\t\tthis.bug.style.backgroundPosition = '-' + this.options.bugWidth + 'px ' + ypos;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twalkFrame: function () {\n\t\t\t\tvar xpos = -1 * (this.walkIndex * this.options.bugWidth) + 'px',\n\t\t\t\t\typos = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n\t\t\t\tthis.bug.style.backgroundPosition = xpos + ' ' + ypos;\n\t\t\t\tthis.walkIndex++;\n\t\t\t\tif (this.walkIndex >= this.options.num_frames) this.walkIndex = 0;\n\t\t\t},\n\n\t\t\tfly: function (landingPosition) {\n\t\t\t\tvar currentTop = this.bug.top,\n\t\t\t\t\tcurrentLeft = this.bug.left,\n\t\t\t\t\tdiffx = currentLeft - landingPosition.left,\n\t\t\t\t\tdiffy = currentTop - landingPosition.top,\n\t\t\t\t\tangle = Math.atan(diffy / diffx);\n\n\t\t\t\tif (Math.abs(diffx) + Math.abs(diffy) < 50) {\n\t\t\t\t\tthis.bug.style.backgroundPosition =\n\t\t\t\t\t\t-2 * this.options.bugWidth + 'px -' + 2 * this.options.bugHeight + 'px';\n\t\t\t\t}\n\t\t\t\tif (Math.abs(diffx) + Math.abs(diffy) < 30) {\n\t\t\t\t\tthis.bug.style.backgroundPosition =\n\t\t\t\t\t\t-1 * this.options.bugWidth + 'px -' + 2 * this.options.bugHeight + 'px';\n\t\t\t\t}\n\t\t\t\tif (Math.abs(diffx) + Math.abs(diffy) < 10) {\n\t\t\t\t\t// close enough:\n\t\t\t\t\tthis.bug.style.backgroundPosition = '0 0'; //+row+'px'));\n\n\t\t\t\t\tthis.stop();\n\t\t\t\t\tthis.go();\n\t\t\t\t\t//this.go.delay(100, this);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// make it wiggle: disabled because its just too fast to see... better would be to make its path wiggly.\n\t\t\t\t//angle = angle - (this.deg2rad(this.random(0,10)));\n\t\t\t\t//console.log('angle: ',this.rad2deg(angle));\n\n\t\t\t\tvar dx = Math.cos(angle) * this.options.flySpeed,\n\t\t\t\t\tdy = Math.sin(angle) * this.options.flySpeed;\n\n\t\t\t\tif ((currentLeft > landingPosition.left && dx > 0) || (currentLeft > landingPosition.left && dx < 0)) {\n\t\t\t\t\t// make sure angle is right way\n\t\t\t\t\tdx = -1 * dx;\n\t\t\t\t\tif (Math.abs(diffx) < Math.abs(dx)) {\n\t\t\t\t\t\tdx = dx / 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((currentTop < landingPosition.top && dy < 0) || (currentTop > landingPosition.top && dy > 0)) {\n\t\t\t\t\tdy = -1 * dy;\n\t\t\t\t\tif (Math.abs(diffy) < Math.abs(dy)) {\n\t\t\t\t\t\tdy = dy / 4;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.moveBug(currentLeft + dx, currentTop + dy);\n\t\t\t},\n\n\t\t\tflyRand: function () {\n\t\t\t\tthis.stop();\n\t\t\t\tvar landingPosition = {};\n\t\t\t\tlandingPosition.top = this.random(\n\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\tdocument.documentElement.clientHeight - this.options.edge_resistance\n\t\t\t\t);\n\t\t\t\tlandingPosition.left = this.random(\n\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\tdocument.documentElement.clientWidth - this.options.edge_resistance\n\t\t\t\t);\n\n\t\t\t\tthis.startFlying(landingPosition);\n\t\t\t},\n\n\t\t\tstartFlying: function (landingPosition) {\n\t\t\t\tvar currentTop = this.bug.top,\n\t\t\t\t\tcurrentLeft = this.bug.left,\n\t\t\t\t\tdiffx = landingPosition.left - currentLeft,\n\t\t\t\t\tdiffy = landingPosition.top - currentTop;\n\n\t\t\t\tthis.bug.left = landingPosition.left;\n\t\t\t\tthis.bug.top = landingPosition.top;\n\n\t\t\t\tthis.angle_rad = Math.atan(diffy / diffx);\n\t\t\t\tthis.angle_deg = this.rad2deg(this.angle_rad);\n\n\t\t\t\tif (diffx > 0) {\n\t\t\t\t\t// going left: quadrant 1 or 2\n\t\t\t\t\tthis.angle_deg = 90 + this.angle_deg;\n\t\t\t\t} else {\n\t\t\t\t\t// going right: quadrant 3 or 4\n\t\t\t\t\tthis.angle_deg = 270 + this.angle_deg;\n\t\t\t\t}\n\n\t\t\t\tthis.moveBug(currentLeft, currentTop, this.angle_deg);\n\n\t\t\t\t// start animation:\n\t\t\t\tvar that = this;\n\t\t\t\tthis.flyperiodical = setInterval(function () {\n\t\t\t\t\tthat.fly(landingPosition);\n\t\t\t\t}, 10);\n\t\t\t},\n\n\t\t\tflyIn: function () {\n\t\t\t\tif (!this.bug) {\n\t\t\t\t\tthis.makeBug();\n\t\t\t\t}\n\n\t\t\t\tif (!this.bug) return;\n\n\t\t\t\tthis.stop();\n\t\t\t\t// pick a random side:\n\t\t\t\tvar side = Math.round(Math.random() * 4 - 0.5),\n\t\t\t\t\td = document,\n\t\t\t\t\te = d.documentElement,\n\t\t\t\t\tg = d.getElementsByTagName('body')[0],\n\t\t\t\t\twindowX = window.innerWidth || e.clientWidth || g.clientWidth,\n\t\t\t\t\twindowY = window.innerHeight || e.clientHeight || g.clientHeight;\n\t\t\t\tif (side > 3) side = 3;\n\t\t\t\tif (side < 0) side = 0;\n\t\t\t\tvar style = {},\n\t\t\t\t\ts;\n\t\t\t\tif (side === 0) {\n\t\t\t\t\t// top:\n\t\t\t\t\tstyle.top = -2 * this.options.bugHeight;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else if (side === 1) {\n\t\t\t\t\t// right:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = windowX + 2 * this.options.bugWidth;\n\t\t\t\t} else if (side === 2) {\n\t\t\t\t\t// bottom:\n\t\t\t\t\tstyle.top = windowY + 2 * this.options.bugHeight;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else {\n\t\t\t\t\t// left:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = -3 * this.options.bugWidth;\n\t\t\t\t}\n\t\t\t\tvar row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n\t\t\t\tthis.bug.style.backgroundPosition = -3 * this.options.bugWidth + 'px ' + row;\n\t\t\t\tthis.bug.top = style.top;\n\t\t\t\tthis.bug.left = style.left;\n\n\t\t\t\tthis.drawBug();\n\n\t\t\t\t// landing position:\n\t\t\t\tvar landingPosition = {};\n\t\t\t\tlandingPosition.top = this.random(\n\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\tdocument.documentElement.clientHeight - this.options.edge_resistance\n\t\t\t\t);\n\t\t\t\tlandingPosition.left = this.random(\n\t\t\t\t\tthis.options.edge_resistance,\n\t\t\t\t\tdocument.documentElement.clientWidth - this.options.edge_resistance\n\t\t\t\t);\n\n\t\t\t\tthis.startFlying(landingPosition);\n\t\t\t},\n\n\t\t\twalkIn: function () {\n\t\t\t\tif (!this.bug) {\n\t\t\t\t\tthis.makeBug();\n\t\t\t\t}\n\n\t\t\t\tif (!this.bug) return;\n\n\t\t\t\tthis.stop();\n\t\t\t\t// pick a random side:\n\t\t\t\tvar side = Math.round(Math.random() * 4 - 0.5),\n\t\t\t\t\td = document,\n\t\t\t\t\te = d.documentElement,\n\t\t\t\t\tg = d.getElementsByTagName('body')[0],\n\t\t\t\t\twindowX = window.innerWidth || e.clientWidth || g.clientWidth,\n\t\t\t\t\twindowY = window.innerHeight || e.clientHeight || g.clientHeight;\n\t\t\t\tif (side > 3) side = 3;\n\t\t\t\tif (side < 0) side = 0;\n\t\t\t\tvar style = {},\n\t\t\t\t\ts;\n\t\t\t\tif (side === 0) {\n\t\t\t\t\t// top:\n\t\t\t\t\tstyle.top = -1.3 * this.options.bugHeight;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else if (side === 1) {\n\t\t\t\t\t// right:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = windowX + 0.3 * this.options.bugWidth;\n\t\t\t\t} else if (side === 2) {\n\t\t\t\t\t// bottom:\n\t\t\t\t\tstyle.top = windowY + 0.3 * this.options.bugHeight;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else {\n\t\t\t\t\t// left:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = -1.3 * this.options.bugWidth;\n\t\t\t\t}\n\t\t\t\tvar row = this.wingsOpen ? '0' : '-' + this.options.bugHeight + 'px';\n\t\t\t\tthis.bug.style.backgroundPosition = -3 * this.options.bugWidth + 'px ' + row;\n\t\t\t\tthis.bug.top = style.top;\n\t\t\t\tthis.bug.left = style.left;\n\n\t\t\t\tthis.drawBug();\n\n\t\t\t\t// start walking:\n\t\t\t\tthis.go();\n\t\t\t},\n\n\t\t\tflyOff: function () {\n\t\t\t\tthis.stop();\n\t\t\t\t// pick a random side to fly off to, where 0 is top and continuing clockwise.\n\t\t\t\tvar side = this.random(0, 3),\n\t\t\t\t\tstyle = {},\n\t\t\t\t\td = document,\n\t\t\t\t\te = d.documentElement,\n\t\t\t\t\tg = d.getElementsByTagName('body')[0],\n\t\t\t\t\twindowX = window.innerWidth || e.clientWidth || g.clientWidth,\n\t\t\t\t\twindowY = window.innerHeight || e.clientHeight || g.clientHeight;\n\n\t\t\t\tif (side === 0) {\n\t\t\t\t\t// top:\n\t\t\t\t\tstyle.top = -200;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else if (side === 1) {\n\t\t\t\t\t// right:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = windowX + 200;\n\t\t\t\t} else if (side === 2) {\n\t\t\t\t\t//bottom:\n\t\t\t\t\tstyle.top = windowY + 200;\n\t\t\t\t\tstyle.left = Math.random() * windowX;\n\t\t\t\t} else {\n\t\t\t\t\t// left:\n\t\t\t\t\tstyle.top = Math.random() * windowY;\n\t\t\t\t\tstyle.left = -200;\n\t\t\t\t}\n\t\t\t\tthis.startFlying(style);\n\t\t\t},\n\n\t\t\tdie: function () {\n\t\t\t\tthis.stop();\n\t\t\t\t//pick death style:\n\t\t\t\tvar deathType = this.random(0, this.options.numDeathTypes - 1);\n\n\t\t\t\tthis.alive = false;\n\t\t\t\tthis.drop(deathType);\n\t\t\t},\n\n\t\t\tdrop: function (deathType) {\n\t\t\t\tvar startPos = this.bug.top,\n\t\t\t\t\td = document,\n\t\t\t\t\te = d.documentElement,\n\t\t\t\t\tg = d.getElementsByTagName('body')[0],\n\t\t\t\t\tfinalPos = window.innerHeight || e.clientHeight || g.clientHeight,\n\t\t\t\t\tfinalPos = finalPos - this.options.bugHeight,\n\t\t\t\t\trotationRate = this.random(0, 20, true),\n\t\t\t\t\tstartTime = Date.now(),\n\t\t\t\t\tthat = this;\n\n\t\t\t\tthis.bug.classList.add('bug-dead');\n\n\t\t\t\tthis.dropTimer = requestAnimFrame(function (t) {\n\t\t\t\t\tthat._lastTimestamp = t;\n\t\t\t\t\tthat.dropping(t, startPos, finalPos, rotationRate, deathType);\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdropping: function (t, startPos, finalPos, rotationRate, deathType) {\n\t\t\t\tvar elapsedTime = t - this._lastTimestamp,\n\t\t\t\t\tdeltaPos = 0.002 * (elapsedTime * elapsedTime),\n\t\t\t\t\tnewPos = startPos + deltaPos;\n\t\t\t\t//console.log(t, elapsedTime, deltaPos, newPos);\n\n\t\t\t\tvar that = this;\n\n\t\t\t\tif (newPos >= finalPos) {\n\t\t\t\t\tnewPos = finalPos;\n\t\t\t\t\tclearTimeout(this.dropTimer);\n\n\t\t\t\t\tthis.angle_deg = 0;\n\t\t\t\t\tthis.angle_rad = this.deg2rad(this.angle_deg);\n\t\t\t\t\tthis.transform('rotate(' + (90 - this.angle_deg) + 'deg) scale(' + this.zoom + ')');\n\t\t\t\t\tthis.bug.style.top = null;\n\t\t\t\t\t// because it is (or might be) zoomed and rotated, we cannot just just bottom = 0. Figure out real bottom position:\n\t\t\t\t\tvar rotationOffset = (this.options.bugWidth * this.zoom - this.options.bugHeight * this.zoom) / 2;\n\t\t\t\t\tvar zoomOffset = (this.options.bugHeight / 2) * (1 - this.zoom);\n\t\t\t\t\tthis.bug.style.bottom = Math.ceil(rotationOffset - zoomOffset) + 'px'; // because its rotated and zoomed.\n\t\t\t\t\tthis.bug.style.left = this.bug.left + 'px';\n\t\t\t\t\tthis.bug.style.backgroundPosition = '-' + deathType * 2 * this.options.bugWidth + 'px 100%';\n\n\t\t\t\t\tthis.twitch(deathType);\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.dropTimer = requestAnimFrame(function (t) {\n\t\t\t\t\tthat.dropping(t, startPos, finalPos, rotationRate, deathType);\n\t\t\t\t});\n\n\t\t\t\tif (elapsedTime < 20) return;\n\n\t\t\t\tthis.angle_deg = (this.angle_deg + rotationRate) % 360;\n\t\t\t\tthis.angle_rad = this.deg2rad(this.angle_deg);\n\n\t\t\t\tthis.moveBug(this.bug.left, newPos, this.angle_deg);\n\t\t\t},\n\n\t\t\ttwitch: function (deathType, legPos) {\n\t\t\t\t//this.bug.style.back\n\t\t\t\tif (!legPos) legPos = 0;\n\t\t\t\tvar that = this;\n\t\t\t\tif (deathType === 0 || deathType === 1) {\n\t\t\t\t\tthat.twitchTimer = setTimeout(function () {\n\t\t\t\t\t\tthat.bug.style.backgroundPosition =\n\t\t\t\t\t\t\t'-' + (deathType * 2 + (legPos % 2)) * that.options.bugWidth + 'px 100%';\n\t\t\t\t\t\tthat.twitchTimer = setTimeout(function () {\n\t\t\t\t\t\t\tlegPos++;\n\t\t\t\t\t\t\tthat.bug.style.backgroundPosition =\n\t\t\t\t\t\t\t\t'-' + (deathType * 2 + (legPos % 2)) * that.options.bugWidth + 'px 100%';\n\t\t\t\t\t\t\tthat.twitch(deathType, ++legPos);\n\t\t\t\t\t\t}, that.random(300, 800));\n\t\t\t\t\t}, this.random(1000, 10000));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/* helper methods: */\n\t\t\trad2deg: function (rad) {\n\t\t\t\treturn rad * this.rad2deg_k;\n\t\t\t},\n\t\t\tdeg2rad: function (deg) {\n\t\t\t\treturn deg * this.deg2rad_k;\n\t\t\t},\n\t\t\trandom: function (min, max, plusminus) {\n\t\t\t\tif (min == max) return min;\n\t\t\t\tvar result = Math.round(min - 0.5 + Math.random() * (max - min + 1));\n\t\t\t\tif (plusminus) return Math.random() > 0.5 ? result : -result;\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tnext_small_turn: function () {\n\t\t\t\tthis.small_turn_counter = Math.round(Math.random() * 10);\n\t\t\t},\n\t\t\tnext_large_turn: function () {\n\t\t\t\tthis.large_turn_counter = Math.round(Math.random() * 40);\n\t\t\t},\n\t\t\tnext_stationary: function () {\n\t\t\t\tthis.toggle_stationary_counter = this.random(50, 300);\n\t\t\t},\n\n\t\t\tbug_near_window_edge: function () {\n\t\t\t\tthis.near_edge = 0;\n\t\t\t\tif (this.bug.top < this.options.edge_resistance) this.near_edge |= this.NEAR_TOP_EDGE;\n\t\t\t\telse if (this.bug.top > document.documentElement.clientHeight - this.options.edge_resistance)\n\t\t\t\t\tthis.near_edge |= this.NEAR_BOTTOM_EDGE;\n\t\t\t\tif (this.bug.left < this.options.edge_resistance) this.near_edge |= this.NEAR_LEFT_EDGE;\n\t\t\t\telse if (this.bug.left > document.documentElement.clientWidth - this.options.edge_resistance)\n\t\t\t\t\tthis.near_edge |= this.NEAR_RIGHT_EDGE;\n\t\t\t\treturn this.near_edge;\n\t\t\t},\n\n\t\t\tgetPos: function () {\n\t\t\t\tif (this.inserted && this.bug && this.bug.style) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop: parseInt(this.bug.top, 10),\n\t\t\t\t\t\tleft: parseInt(this.bug.left, 10),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t},\n\t\t};\n\n\t\tvar SpawnBug = function () {\n\t\t\tvar newBug = {},\n\t\t\t\tprop;\n\t\t\tfor (prop in Bug) {\n\t\t\t\tif (Bug.hasOwnProperty(prop)) {\n\t\t\t\t\tnewBug[prop] = Bug[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newBug;\n\t\t};\n\n\t\t// debated about which pattern to use to instantiate each bug...\n\t\t// see http://jsperf.com/obj-vs-prototype-vs-other\n\n\t\t/**\n\t\t * Helper methods:\n\t\t **/\n\n\t\tvar mergeOptions = function (obj1, obj2, clone) {\n\t\t\tif (typeof clone == 'undefined') {\n\t\t\t\tclone = true;\n\t\t\t}\n\t\t\tvar newobj = clone ? cloneOf(obj1) : obj1;\n\t\t\tfor (var key in obj2) {\n\t\t\t\tif (obj2.hasOwnProperty(key)) {\n\t\t\t\t\tnewobj[key] = obj2[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn newobj;\n\t\t};\n\n\t\tvar cloneOf = function (obj) {\n\t\t\tif (obj == null || typeof obj != 'object') return obj;\n\n\t\t\tvar temp = obj.constructor(); // changed\n\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\ttemp[key] = cloneOf(obj[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn temp;\n\t\t};\n\n\t\t/* Request animation frame polyfill */\n\t\t/* http://paulirish.com/2011/requestanimationframe-for-smart-animating/ */\n\t\twindow.requestAnimFrame = (function () {\n\t\t\treturn (\n\t\t\t\twindow.requestAnimationFrame ||\n\t\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\t\twindow.oRequestAnimationFrame ||\n\t\t\t\twindow.msRequestAnimationFrame ||\n\t\t\t\tfunction (/* function */ callback, /* DOMElement */ element) {\n\t\t\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t\t\t}\n\t\t\t);\n\t\t})();\n\n\t\t// default fruit fly bug:\n\t\tnew BugController({});\n\n\t\t// default spiders:\n\t\tnew SpiderController({});\n\n\t\t// 1030 lines of code. OOF.\n\t}, []);\n};\n\nexport default bugsOnTheLoose;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}