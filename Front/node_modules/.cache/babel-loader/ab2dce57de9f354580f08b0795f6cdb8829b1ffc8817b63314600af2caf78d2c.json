{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/2_guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/2_guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/2_guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-undef */ // A hook to fetch posts from a facebook page\n// Usage: const { posts, loading, error } = useFacebook('pageId', 'accessToken', 5);\nimport{useState,useEffect}from'react';var fetchFacebook=function fetchFacebook(/** @type {number} */pageId,/** @type {string} */accessToken,/** @type {number} */limit){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){setLoading(true);var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(/** @type {number} */pageId,/** @type {string} */accessToken,/** @type {number} */limit){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_CORS_ANYWHERE_PROXY,\"https://graph.facebook.com/v10.0/\").concat(pageId,\"/posts?access_token=\").concat(accessToken,\"&limit=\").concat(limit));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);setPosts(data.data);setLoading(false);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(true);setErrorMessage(_context.t0.message);setLoading(false);case 17:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function fetchPosts(_x,_x2,_x3){return _ref.apply(this,arguments);};}();fetchPosts(pageId,accessToken,limit);},[pageId,accessToken,limit]);return{posts:posts,loading:loading,error:error,errorMessage:errorMessage};};export default fetchFacebook;","map":{"version":3,"names":["useState","useEffect","fetchFacebook","pageId","accessToken","limit","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","errorMessage","setErrorMessage","fetchPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","process","env","REACT_APP_CORS_ANYWHERE_PROXY","sent","json","console","log","t0","message","stop","_x","_x2","_x3","apply","arguments"],"sources":["/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/2_guepes-et-frelons/src/utils/hooks/facebook/fetchFacebook.jsx"],"sourcesContent":["/* eslint-disable no-undef */\n// A hook to fetch posts from a facebook page\n// Usage: const { posts, loading, error } = useFacebook('pageId', 'accessToken', 5);\n\nimport { useState, useEffect } from 'react';\n\nconst fetchFacebook = (\n\t/** @type {number} */ pageId,\n\t/** @type {string} */ accessToken,\n\t/** @type {number} */ limit\n) => {\n\tconst [posts, setPosts] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState(false);\n\tconst [errorMessage, setErrorMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\n\t\tconst fetchPosts = async (\n\t\t\t/** @type {number} */ pageId,\n\t\t\t/** @type {string} */ accessToken,\n\t\t\t/** @type {number} */ limit\n\t\t) => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/v10.0/${pageId}/posts?access_token=${accessToken}&limit=${limit}`\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\t\t\t\tconsole.log(data);\n\t\t\t\tsetPosts(data.data);\n\t\t\t\tsetLoading(false);\n\t\t\t} catch (error) {\n\t\t\t\tsetError(true);\n\t\t\t\tsetErrorMessage(error.message);\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t};\n\t\tfetchPosts(pageId, accessToken, limit);\n\t}, [pageId, accessToken, limit]);\n\n\treturn { posts, loading, error, errorMessage };\n};\n\nexport default fetchFacebook;\n"],"mappings":"0eAAA,8BACA;AACA;AAEA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAClB,qBAAsBC,MAAM,CAC5B,qBAAsBC,WAAW,CACjC,qBAAsBC,KAAK,CACvB,CACJ,IAAAC,SAAA,CAA0BN,QAAQ,CAAC,EAAE,CAAC,CAAAO,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA8BX,QAAQ,CAAC,IAAI,CAAC,CAAAY,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0Bf,QAAQ,CAAC,KAAK,CAAC,CAAAgB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAlCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAwCnB,QAAQ,CAAC,EAAE,CAAC,CAAAoB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpCnB,SAAS,CAAC,UAAM,CACfa,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAM,CAAAS,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAClB,qBAAsBzB,MAAM,CAC5B,qBAAsBC,WAAW,CACjC,qBAAsBC,KAAK,MAAAwB,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGH,CAAAC,KAAK,IAAAC,MAAA,CACxBC,OAAO,CAACC,GAAG,CAACC,6BAA6B,sCAAAH,MAAA,CAAoClC,MAAM,yBAAAkC,MAAA,CAAuBjC,WAAW,YAAAiC,MAAA,CAAUhC,KAAK,CACxI,CAAC,QAFKwB,QAAQ,CAAAI,QAAA,CAAAQ,IAAA,CAAAR,QAAA,CAAAE,IAAA,SAGK,CAAAN,QAAQ,CAACa,IAAI,CAAC,CAAC,QAA5BZ,IAAI,CAAAG,QAAA,CAAAQ,IAAA,CACVE,OAAO,CAACC,GAAG,CAACd,IAAI,CAAC,CACjBpB,QAAQ,CAACoB,IAAI,CAACA,IAAI,CAAC,CACnBhB,UAAU,CAAC,KAAK,CAAC,CAACmB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAY,EAAA,CAAAZ,QAAA,aAElBf,QAAQ,CAAC,IAAI,CAAC,CACdI,eAAe,CAACW,QAAA,CAAAY,EAAA,CAAMC,OAAO,CAAC,CAC9BhC,UAAU,CAAC,KAAK,CAAC,CAAC,yBAAAmB,QAAA,CAAAc,IAAA,MAAAnB,OAAA,iBAEnB,kBAlBK,CAAAL,UAAUA,CAAAyB,EAAA,CAAAC,GAAA,CAAAC,GAAA,SAAA1B,IAAA,CAAA2B,KAAA,MAAAC,SAAA,OAkBf,CACD7B,UAAU,CAACpB,MAAM,CAAEC,WAAW,CAAEC,KAAK,CAAC,CACvC,CAAC,CAAE,CAACF,MAAM,CAAEC,WAAW,CAAEC,KAAK,CAAC,CAAC,CAEhC,MAAO,CAAEI,KAAK,CAALA,KAAK,CAAEI,OAAO,CAAPA,OAAO,CAAEI,KAAK,CAALA,KAAK,CAAEI,YAAY,CAAZA,YAAa,CAAC,CAC/C,CAAC,CAED,cAAe,CAAAnB,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}