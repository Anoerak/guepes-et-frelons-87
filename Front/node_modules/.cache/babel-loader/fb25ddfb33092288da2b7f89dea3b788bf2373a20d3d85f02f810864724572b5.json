{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable no-undef */ // We want to generate a Facebook access token that will be used to fetch the posts from the Facebook page.\n// We gonna fetch it using a hook that we will create in the next step.\nimport{useState,useEffect}from'react';var generateFbToken=function generateFbToken(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];useEffect(function(){setLoading(true);var fetchToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(process.env.REACT_APP_CORS_ANYWHERE_PROXY,\"https://graph.facebook.com/oauth/access_token?client_id=\").concat(process.env.REACT_APP_FACEBOOK_APP_ID,\"&client_secret=\").concat(process.env.REACT_APP_FACEBOOK_APP_SECRET,\"&grant_type=client_credentials\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);setToken(data.access_token);setLoading(false);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(true);setErrorMessage(_context.t0.message);setLoading(false);case 17:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function fetchToken(){return _ref.apply(this,arguments);};}();fetchToken();},[]);return{token:token,loading:loading,error:error,errorMessage:errorMessage};};export default generateFbToken;","map":{"version":3,"names":["useState","useEffect","generateFbToken","_useState","_useState2","_slicedToArray","token","setToken","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","errorMessage","setErrorMessage","fetchToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","process","env","REACT_APP_CORS_ANYWHERE_PROXY","REACT_APP_FACEBOOK_APP_ID","REACT_APP_FACEBOOK_APP_SECRET","sent","json","console","log","access_token","t0","message","stop","apply","arguments"],"sources":["/Users/sebastien/Sebbe's Cloud/Dev/Projects/Privates/guepes-et-frelons/src/utils/hooks/facebook/generateFbToken.jsx"],"sourcesContent":["/* eslint-disable no-undef */\n// We want to generate a Facebook access token that will be used to fetch the posts from the Facebook page.\n// We gonna fetch it using a hook that we will create in the next step.\n\nimport { useState, useEffect } from 'react';\n\nconst generateFbToken = () => {\n\tconst [token, setToken] = useState('');\n\tconst [loading, setLoading] = useState(true);\n\tconst [error, setError] = useState(false);\n\tconst [errorMessage, setErrorMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tsetLoading(true);\n\n\t\tconst fetchToken = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`${process.env.REACT_APP_CORS_ANYWHERE_PROXY}https://graph.facebook.com/oauth/access_token?client_id=${process.env.REACT_APP_FACEBOOK_APP_ID}&client_secret=${process.env.REACT_APP_FACEBOOK_APP_SECRET}&grant_type=client_credentials`\n\t\t\t\t);\n\t\t\t\tconst data = await response.json();\n\t\t\t\tconsole.log(data);\n\t\t\t\tsetToken(data.access_token);\n\t\t\t\tsetLoading(false);\n\t\t\t} catch (error) {\n\t\t\t\tsetError(true);\n\t\t\t\tsetErrorMessage(error.message);\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t};\n\t\tfetchToken();\n\t}, []);\n\n\treturn { token, loading, error, errorMessage };\n};\n\nexport default generateFbToken;\n"],"mappings":"oeAAA,8BACA;AACA;AAEA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE3C,GAAM,CAAAC,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC7B,IAAAC,SAAA,CAA0BH,QAAQ,CAAC,EAAE,CAAC,CAAAI,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA8BR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA0BZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAlCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAwChB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpChB,SAAS,CAAC,UAAM,CACfU,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAM,CAAAS,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEM,CAAAC,KAAK,IAAAC,MAAA,CACxBC,OAAO,CAACC,GAAG,CAACC,6BAA6B,6DAAAH,MAAA,CAA2DC,OAAO,CAACC,GAAG,CAACE,yBAAyB,oBAAAJ,MAAA,CAAkBC,OAAO,CAACC,GAAG,CAACG,6BAA6B,kCACxM,CAAC,QAFKb,QAAQ,CAAAI,QAAA,CAAAU,IAAA,CAAAV,QAAA,CAAAE,IAAA,SAGK,CAAAN,QAAQ,CAACe,IAAI,CAAC,CAAC,QAA5Bd,IAAI,CAAAG,QAAA,CAAAU,IAAA,CACVE,OAAO,CAACC,GAAG,CAAChB,IAAI,CAAC,CACjBpB,QAAQ,CAACoB,IAAI,CAACiB,YAAY,CAAC,CAC3BjC,UAAU,CAAC,KAAK,CAAC,CAACmB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAe,EAAA,CAAAf,QAAA,aAElBf,QAAQ,CAAC,IAAI,CAAC,CACdI,eAAe,CAACW,QAAA,CAAAe,EAAA,CAAMC,OAAO,CAAC,CAC9BnC,UAAU,CAAC,KAAK,CAAC,CAAC,yBAAAmB,QAAA,CAAAiB,IAAA,MAAAtB,OAAA,iBAEnB,kBAdK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAA2B,KAAA,MAAAC,SAAA,OAcf,CACD7B,UAAU,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAEd,KAAK,CAALA,KAAK,CAAEI,OAAO,CAAPA,OAAO,CAAEI,KAAK,CAALA,KAAK,CAAEI,YAAY,CAAZA,YAAa,CAAC,CAC/C,CAAC,CAED,cAAe,CAAAhB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}